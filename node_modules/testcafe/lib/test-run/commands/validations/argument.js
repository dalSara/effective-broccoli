'use strict';

exports.__esModule = true;
exports.setSpeedArgument = exports.booleanArgument = exports.positiveIntegerArgument = exports.integerArgument = undefined;
exports.actionRoleArgument = actionRoleArgument;
exports.actionOptions = actionOptions;
exports.nonEmptyStringArgument = nonEmptyStringArgument;
exports.nullableStringArgument = nullableStringArgument;
exports.urlArgument = urlArgument;
exports.stringOrStringArrayArgument = stringOrStringArrayArgument;
exports.resizeWindowDeviceArgument = resizeWindowDeviceArgument;

var _testcafeBrowserTools = require('testcafe-browser-tools');

var _markerSymbol = require('../../../role/marker-symbol');

var _markerSymbol2 = _interopRequireDefault(_markerSymbol);

var _factories = require('./factories');

var _testRun = require('../../../errors/test-run');

var _testPageUrl = require('../../../api/test-page-url');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Validators
var integerArgument = exports.integerArgument = (0, _factories.createIntegerValidator)(_testRun.ActionIntegerArgumentError);
var positiveIntegerArgument = exports.positiveIntegerArgument = (0, _factories.createPositiveIntegerValidator)(_testRun.ActionPositiveIntegerArgumentError);
var booleanArgument = exports.booleanArgument = (0, _factories.createBooleanValidator)(_testRun.ActionBooleanArgumentError);
var setSpeedArgument = exports.setSpeedArgument = (0, _factories.createSpeedValidator)(_testRun.SetTestSpeedArgumentError);

function actionRoleArgument(name, val) {
    if (!val || !val[_markerSymbol2.default]) throw new _testRun.ActionRoleArgumentError(name, typeof val);
}

function actionOptions(name, val) {
    var type = typeof val;

    if (type !== 'object' && val !== null && val !== void 0) throw new _testRun.ActionOptionsTypeError(type);
}

function nonEmptyStringArgument(argument, val, createError) {
    if (!createError) createError = actualValue => new _testRun.ActionStringArgumentError(argument, actualValue);

    var type = typeof val;

    if (type !== 'string') throw createError(type);

    if (!val.length) throw createError('""');
}

function nullableStringArgument(argument, val) {
    var type = typeof val;

    if (type !== 'string' && val !== null) throw new _testRun.ActionNullableStringArgumentError(argument, type);
}

function urlArgument(name, val) {
    nonEmptyStringArgument(name, val);

    (0, _testPageUrl.assertUrl)(val.trim(), 'navigateTo');
}

function stringOrStringArrayArgument(argument, val) {
    var type = typeof val;

    if (type === 'string') {
        if (!val.length) throw new _testRun.ActionStringOrStringArrayArgumentError(argument, '""');
    } else if (Array.isArray(val)) {
        if (!val.length) throw new _testRun.ActionStringOrStringArrayArgumentError(argument, '[]');

        var validateElement = elementIndex => nonEmptyStringArgument(argument, val[elementIndex], actualValue => new _testRun.ActionStringArrayElementError(argument, actualValue, elementIndex));

        for (var i = 0; i < val.length; i++) validateElement(i);
    } else throw new _testRun.ActionStringOrStringArrayArgumentError(argument, type);
}

function resizeWindowDeviceArgument(name, val) {
    nonEmptyStringArgument(name, val);

    if (!(0, _testcafeBrowserTools.isValidDeviceName)(val)) throw new _testRun.ActionUnsupportedDeviceTypeError(name, val);
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy90ZXN0LXJ1bi9jb21tYW5kcy92YWxpZGF0aW9ucy9hcmd1bWVudC5qcyJdLCJuYW1lcyI6WyJhY3Rpb25Sb2xlQXJndW1lbnQiLCJhY3Rpb25PcHRpb25zIiwibm9uRW1wdHlTdHJpbmdBcmd1bWVudCIsIm51bGxhYmxlU3RyaW5nQXJndW1lbnQiLCJ1cmxBcmd1bWVudCIsInN0cmluZ09yU3RyaW5nQXJyYXlBcmd1bWVudCIsInJlc2l6ZVdpbmRvd0RldmljZUFyZ3VtZW50IiwiaW50ZWdlckFyZ3VtZW50IiwiQWN0aW9uSW50ZWdlckFyZ3VtZW50RXJyb3IiLCJwb3NpdGl2ZUludGVnZXJBcmd1bWVudCIsIkFjdGlvblBvc2l0aXZlSW50ZWdlckFyZ3VtZW50RXJyb3IiLCJib29sZWFuQXJndW1lbnQiLCJBY3Rpb25Cb29sZWFuQXJndW1lbnRFcnJvciIsInNldFNwZWVkQXJndW1lbnQiLCJTZXRUZXN0U3BlZWRBcmd1bWVudEVycm9yIiwibmFtZSIsInZhbCIsInJvbGVNYXJrZXJTeW1ib2wiLCJBY3Rpb25Sb2xlQXJndW1lbnRFcnJvciIsInR5cGUiLCJBY3Rpb25PcHRpb25zVHlwZUVycm9yIiwiYXJndW1lbnQiLCJjcmVhdGVFcnJvciIsImFjdHVhbFZhbHVlIiwiQWN0aW9uU3RyaW5nQXJndW1lbnRFcnJvciIsImxlbmd0aCIsIkFjdGlvbk51bGxhYmxlU3RyaW5nQXJndW1lbnRFcnJvciIsInRyaW0iLCJBY3Rpb25TdHJpbmdPclN0cmluZ0FycmF5QXJndW1lbnRFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsInZhbGlkYXRlRWxlbWVudCIsImVsZW1lbnRJbmRleCIsIkFjdGlvblN0cmluZ0FycmF5RWxlbWVudEVycm9yIiwiaSIsIkFjdGlvblVuc3VwcG9ydGVkRGV2aWNlVHlwZUVycm9yIl0sIm1hcHBpbmdzIjoiOzs7O1FBa0NnQkEsa0IsR0FBQUEsa0I7UUFLQUMsYSxHQUFBQSxhO1FBUUFDLHNCLEdBQUFBLHNC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MkNQLFFBQTNDLEVBQXFERixJQUFyRCxDQUFOO0FBQ1A7O0FBRU0sU0FBU2IsMEJBQVQsQ0FBcUNTLElBQXJDLEVBQTJDQyxHQUEzQyxFQUFnRDtBQUNuRGQsMkJBQXVCYSxJQUF2QixFQUE2QkMsR0FBN0I7O0FBRUEsUUFBSSxDQUFDLDZDQUFrQkEsR0FBbEIsQ0FBTCxFQUNJLE1BQU0sSUFBSW1CLHlDQUFKLENBQXFDcEIsSUFBckMsRUFBMkNDLEdBQTNDLENBQU47QUFDUCIsImZpbGUiOiJ0ZXN0LXJ1bi9jb21tYW5kcy92YWxpZGF0aW9ucy9hcmd1bWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVmFsaWREZXZpY2VOYW1lIH0gZnJvbSAndGVzdGNhZmUtYnJvd3Nlci10b29scyc7XG5pbXBvcnQgcm9sZU1hcmtlclN5bWJvbCBmcm9tICcuLi8uLi8uLi9yb2xlL21hcmtlci1zeW1ib2wnO1xuXG5pbXBvcnQge1xuICAgIGNyZWF0ZUJvb2xlYW5WYWxpZGF0b3IsXG4gICAgY3JlYXRlSW50ZWdlclZhbGlkYXRvcixcbiAgICBjcmVhdGVQb3NpdGl2ZUludGVnZXJWYWxpZGF0b3IsXG4gICAgY3JlYXRlU3BlZWRWYWxpZGF0b3Jcbn0gZnJvbSAnLi9mYWN0b3JpZXMnO1xuXG5pbXBvcnQge1xuICAgIEFjdGlvbk9wdGlvbnNUeXBlRXJyb3IsXG4gICAgQWN0aW9uQm9vbGVhbkFyZ3VtZW50RXJyb3IsXG4gICAgQWN0aW9uU3RyaW5nQXJndW1lbnRFcnJvcixcbiAgICBBY3Rpb25OdWxsYWJsZVN0cmluZ0FyZ3VtZW50RXJyb3IsXG4gICAgQWN0aW9uSW50ZWdlckFyZ3VtZW50RXJyb3IsXG4gICAgQWN0aW9uUm9sZUFyZ3VtZW50RXJyb3IsXG4gICAgQWN0aW9uUG9zaXRpdmVJbnRlZ2VyQXJndW1lbnRFcnJvcixcbiAgICBBY3Rpb25TdHJpbmdPclN0cmluZ0FycmF5QXJndW1lbnRFcnJvcixcbiAgICBBY3Rpb25TdHJpbmdBcnJheUVsZW1lbnRFcnJvcixcbiAgICBBY3Rpb25VbnN1cHBvcnRlZERldmljZVR5cGVFcnJvcixcbiAgICBTZXRUZXN0U3BlZWRBcmd1bWVudEVycm9yXG59IGZyb20gJy4uLy4uLy4uL2Vycm9ycy90ZXN0LXJ1bic7XG5cbmltcG9ydCB7IGFzc2VydFVybCB9IGZyb20gJy4uLy4uLy4uL2FwaS90ZXN0LXBhZ2UtdXJsJztcblxuXG4vLyBWYWxpZGF0b3JzXG5leHBvcnQgdmFyIGludGVnZXJBcmd1bWVudCAgICAgICAgID0gY3JlYXRlSW50ZWdlclZhbGlkYXRvcihBY3Rpb25JbnRlZ2VyQXJndW1lbnRFcnJvcik7XG5leHBvcnQgdmFyIHBvc2l0aXZlSW50ZWdlckFyZ3VtZW50ID0gY3JlYXRlUG9zaXRpdmVJbnRlZ2VyVmFsaWRhdG9yKEFjdGlvblBvc2l0aXZlSW50ZWdlckFyZ3VtZW50RXJyb3IpO1xuZXhwb3J0IHZhciBib29sZWFuQXJndW1lbnQgICAgICAgICA9IGNyZWF0ZUJvb2xlYW5WYWxpZGF0b3IoQWN0aW9uQm9vbGVhbkFyZ3VtZW50RXJyb3IpO1xuZXhwb3J0IHZhciBzZXRTcGVlZEFyZ3VtZW50ICAgICAgICA9IGNyZWF0ZVNwZWVkVmFsaWRhdG9yKFNldFRlc3RTcGVlZEFyZ3VtZW50RXJyb3IpO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhY3Rpb25Sb2xlQXJndW1lbnQgKG5hbWUsIHZhbCkge1xuICAgIGlmICghdmFsIHx8ICF2YWxbcm9sZU1hcmtlclN5bWJvbF0pXG4gICAgICAgIHRocm93IG5ldyBBY3Rpb25Sb2xlQXJndW1lbnRFcnJvcihuYW1lLCB0eXBlb2YgdmFsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGlvbk9wdGlvbnMgKG5hbWUsIHZhbCkge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcblxuICAgIGlmICh0eXBlICE9PSAnb2JqZWN0JyAmJiB2YWwgIT09IG51bGwgJiYgdmFsICE9PSB2b2lkIDApXG4gICAgICAgIHRocm93IG5ldyBBY3Rpb25PcHRpb25zVHlwZUVycm9yKHR5cGUpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBub25FbXB0eVN0cmluZ0FyZ3VtZW50IChhcmd1bWVudCwgdmFsLCBjcmVhdGVFcnJvcikge1xuICAgIGlmICghY3JlYXRlRXJyb3IpXG4gICAgICAgIGNyZWF0ZUVycm9yID0gYWN0dWFsVmFsdWUgPT4gbmV3IEFjdGlvblN0cmluZ0FyZ3VtZW50RXJyb3IoYXJndW1lbnQsIGFjdHVhbFZhbHVlKTtcblxuICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcblxuICAgIGlmICh0eXBlICE9PSAnc3RyaW5nJylcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IodHlwZSk7XG5cbiAgICBpZiAoIXZhbC5sZW5ndGgpXG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdcIlwiJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBudWxsYWJsZVN0cmluZ0FyZ3VtZW50IChhcmd1bWVudCwgdmFsKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuXG4gICAgaWYgKHR5cGUgIT09ICdzdHJpbmcnICYmIHZhbCAhPT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IEFjdGlvbk51bGxhYmxlU3RyaW5nQXJndW1lbnRFcnJvcihhcmd1bWVudCwgdHlwZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cmxBcmd1bWVudCAobmFtZSwgdmFsKSB7XG4gICAgbm9uRW1wdHlTdHJpbmdBcmd1bWVudChuYW1lLCB2YWwpO1xuXG4gICAgYXNzZXJ0VXJsKHZhbC50cmltKCksICduYXZpZ2F0ZVRvJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdPclN0cmluZ0FycmF5QXJndW1lbnQgKGFyZ3VtZW50LCB2YWwpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG5cbiAgICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCF2YWwubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEFjdGlvblN0cmluZ09yU3RyaW5nQXJyYXlBcmd1bWVudEVycm9yKGFyZ3VtZW50LCAnXCJcIicpO1xuICAgIH1cblxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICBpZiAoIXZhbC5sZW5ndGgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgQWN0aW9uU3RyaW5nT3JTdHJpbmdBcnJheUFyZ3VtZW50RXJyb3IoYXJndW1lbnQsICdbXScpO1xuXG4gICAgICAgIHZhciB2YWxpZGF0ZUVsZW1lbnQgPSBlbGVtZW50SW5kZXggPT4gbm9uRW1wdHlTdHJpbmdBcmd1bWVudChcbiAgICAgICAgICAgIGFyZ3VtZW50LFxuICAgICAgICAgICAgdmFsW2VsZW1lbnRJbmRleF0sXG4gICAgICAgICAgICBhY3R1YWxWYWx1ZSA9PiBuZXcgQWN0aW9uU3RyaW5nQXJyYXlFbGVtZW50RXJyb3IoYXJndW1lbnQsIGFjdHVhbFZhbHVlLCBlbGVtZW50SW5kZXgpXG4gICAgICAgICk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB2YWxpZGF0ZUVsZW1lbnQoaSk7XG4gICAgfVxuXG4gICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgQWN0aW9uU3RyaW5nT3JTdHJpbmdBcnJheUFyZ3VtZW50RXJyb3IoYXJndW1lbnQsIHR5cGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzaXplV2luZG93RGV2aWNlQXJndW1lbnQgKG5hbWUsIHZhbCkge1xuICAgIG5vbkVtcHR5U3RyaW5nQXJndW1lbnQobmFtZSwgdmFsKTtcblxuICAgIGlmICghaXNWYWxpZERldmljZU5hbWUodmFsKSlcbiAgICAgICAgdGhyb3cgbmV3IEFjdGlvblVuc3VwcG9ydGVkRGV2aWNlVHlwZUVycm9yKG5hbWUsIHZhbCk7XG59XG4iXX0=
