'use strict';

exports.__esModule = true;

var _keys = require('babel-runtime/core-js/object/keys');

var _keys2 = _interopRequireDefault(_keys);

var _assign = require('babel-runtime/core-js/object/assign');

var _assign2 = _interopRequireDefault(_assign);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _testcafeBrowserTools = require('testcafe-browser-tools');

var _testcafeBrowserTools2 = _interopRequireDefault(_testcafeBrowserTools);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
    isMultiBrowser: true,

    openBrowser(browserId, pageUrl, browserName) {
        return (0, _asyncToGenerator3.default)(function* () {
            var args = browserName.split(' ');
            var alias = args.shift();

            var browserInfo = yield _testcafeBrowserTools2.default.getBrowserInfo(alias);
            var openParameters = (0, _assign2.default)({}, browserInfo);

            if (args.length) openParameters.cmd = args.join(' ') + (openParameters.cmd ? ' ' + openParameters.cmd : '');

            yield _testcafeBrowserTools2.default.open(openParameters, pageUrl);
        })();
    },

    isLocalBrowser() {
        return (0, _asyncToGenerator3.default)(function* () {
            return true;
        })();
    },

    getBrowserList() {
        return (0, _asyncToGenerator3.default)(function* () {
            var installations = yield _testcafeBrowserTools2.default.getInstallations();

            return (0, _keys2.default)(installations);
        })();
    },

    isValidBrowserName(browserName) {
        var _this = this;

        return (0, _asyncToGenerator3.default)(function* () {
            var browserNames = yield _this.getBrowserList();

            browserName = browserName.toLowerCase().split(' ')[0];

            return browserNames.indexOf(browserName) > -1;
        })();
    }
};
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9icm93c2VyL3Byb3ZpZGVyL2J1aWx0LWluL2xvY2FsbHktaW5zdGFsbGVkLmpzIl0sIm5hbWVzIjpbImlzTXVsdGlCcm93c2VyIiwib3BlbkJyb3dzZXIiLCJicm93c2VySWQiLCJwYWdlVXJsIiwiYnJvd3Nlck5hbWUiLCJhcmdzIiwic3BsaXQiLCJhbGlhcyIsInNoaWZ0IiwiYnJvd3NlckluZm8iLCJicm93c2VyVG9vbHMiLCJnZXRCcm93c2VySW5mbyIsIm9wZW5QYXJhbWV0ZXJzIiwibGVuZ3RoIiwiY21kIiwiam9pbiIsIm9wZW4iLCJpc0xvY2FsQnJvd3NlciIsImdldEJyb3dzZXJMaXN0IiwiaW5zdGFsbGF0aW9ucyIsImdldEluc3RhbGxhdGlvbnMiLCJpc1ZhbGlkQnJvd3Nlck5hbWUiLCJicm93c2VyTmFtZXMiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O2tCQUdlO0FBQ1hBLG9CQUFnQixJQURMOztBQUdMQyxlQUFOLENBQW1CQyxTQUFuQixFQUE4QkMsT0FBOUIsRUFBdUNDLFdBQXZDLEVBQW9EO0FBQUE7QUFDaEQsZ0JBQUlDLE9BQVFELFlBQVlFLEtBQVosQ0FBa0IsR0FBbEIsQ0FBWjtBQUNBLGdCQUFJQyxRQUFRRixLQUFLRyxLQUFMLEVBQVo7O0FBRUEsZ0JBQUlDLGNBQWlCLE1BQU1DLCtCQUFhQyxjQUFiLENBQTRCSixLQUE1QixDQUEzQjtBQUNBLGdCQUFJSyxpQkFBaUIsc0JBQWMsRUFBZCxFQUFrQkgsV0FBbEIsQ0FBckI7O0FBRUEsZ0JBQUlKLEtBQUtRLE1BQVQsRUFDSUQsZUFBZUUsR0FBZixHQUFxQlQsS0FBS1UsSUFBTCxDQUFVLEdBQVYsS0FBa0JILGVBQWVFLEdBQWYsR0FBcUIsTUFBTUYsZUFBZUUsR0FBMUMsR0FBZ0QsRUFBbEUsQ0FBckI7O0FBRUosa0JBQU1KLCtCQUFhTSxJQUFiLENBQWtCSixjQUFsQixFQUFrQ1QsT0FBbEMsQ0FBTjtBQVZnRDtBQVduRCxLQWRVOztBQWdCTGMsa0JBQU4sR0FBd0I7QUFBQTtBQUNwQixtQkFBTyxJQUFQO0FBRG9CO0FBRXZCLEtBbEJVOztBQW9CTEMsa0JBQU4sR0FBd0I7QUFBQTtBQUNwQixnQkFBSUMsZ0JBQWdCLE1BQU1ULCtCQUFhVSxnQkFBYixFQUExQjs7QUFFQSxtQkFBTyxvQkFBWUQsYUFBWixDQUFQO0FBSG9CO0FBSXZCLEtBeEJVOztBQTBCTEUsc0JBQU4sQ0FBMEJqQixXQUExQixFQUF1QztBQUFBOztBQUFBO0FBQ25DLGdCQUFJa0IsZUFBZSxNQUFNLE1BQUtKLGNBQUwsRUFBekI7O0FBRUFkLDBCQUFjQSxZQUFZbUIsV0FBWixHQUEwQmpCLEtBQTFCLENBQWdDLEdBQWhDLEVBQXFDLENBQXJDLENBQWQ7O0FBRUEsbUJBQU9nQixhQUFhRSxPQUFiLENBQXFCcEIsV0FBckIsSUFBb0MsQ0FBQyxDQUE1QztBQUxtQztBQU10QztBQWhDVSxDIiwiZmlsZSI6ImJyb3dzZXIvcHJvdmlkZXIvYnVpbHQtaW4vbG9jYWxseS1pbnN0YWxsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYnJvd3NlclRvb2xzIGZyb20gJ3Rlc3RjYWZlLWJyb3dzZXItdG9vbHMnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBpc011bHRpQnJvd3NlcjogdHJ1ZSxcblxuICAgIGFzeW5jIG9wZW5Ccm93c2VyIChicm93c2VySWQsIHBhZ2VVcmwsIGJyb3dzZXJOYW1lKSB7XG4gICAgICAgIHZhciBhcmdzICA9IGJyb3dzZXJOYW1lLnNwbGl0KCcgJyk7XG4gICAgICAgIHZhciBhbGlhcyA9IGFyZ3Muc2hpZnQoKTtcblxuICAgICAgICB2YXIgYnJvd3NlckluZm8gICAgPSBhd2FpdCBicm93c2VyVG9vbHMuZ2V0QnJvd3NlckluZm8oYWxpYXMpO1xuICAgICAgICB2YXIgb3BlblBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBicm93c2VySW5mbyk7XG5cbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoKVxuICAgICAgICAgICAgb3BlblBhcmFtZXRlcnMuY21kID0gYXJncy5qb2luKCcgJykgKyAob3BlblBhcmFtZXRlcnMuY21kID8gJyAnICsgb3BlblBhcmFtZXRlcnMuY21kIDogJycpO1xuXG4gICAgICAgIGF3YWl0IGJyb3dzZXJUb29scy5vcGVuKG9wZW5QYXJhbWV0ZXJzLCBwYWdlVXJsKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgaXNMb2NhbEJyb3dzZXIgKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgYXN5bmMgZ2V0QnJvd3Nlckxpc3QgKCkge1xuICAgICAgICB2YXIgaW5zdGFsbGF0aW9ucyA9IGF3YWl0IGJyb3dzZXJUb29scy5nZXRJbnN0YWxsYXRpb25zKCk7XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGluc3RhbGxhdGlvbnMpO1xuICAgIH0sXG5cbiAgICBhc3luYyBpc1ZhbGlkQnJvd3Nlck5hbWUgKGJyb3dzZXJOYW1lKSB7XG4gICAgICAgIHZhciBicm93c2VyTmFtZXMgPSBhd2FpdCB0aGlzLmdldEJyb3dzZXJMaXN0KCk7XG5cbiAgICAgICAgYnJvd3Nlck5hbWUgPSBicm93c2VyTmFtZS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJylbMF07XG5cbiAgICAgICAgcmV0dXJuIGJyb3dzZXJOYW1lcy5pbmRleE9mKGJyb3dzZXJOYW1lKSA+IC0xO1xuICAgIH1cbn07XG4iXX0=
