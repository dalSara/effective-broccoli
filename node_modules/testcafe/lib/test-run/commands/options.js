'use strict';

exports.__esModule = true;
exports.AssertionOptions = exports.ResizeToFitDeviceOptions = exports.DragToElementOptions = exports.TypeOptions = exports.MoveOptions = exports.ClickOptions = exports.MouseOptions = exports.ElementScreenshotOptions = exports.ScrollOptions = exports.OffsetOptions = exports.ActionOptions = exports.speedOption = exports.booleanOption = exports.positiveIntegerOption = exports.integerOption = undefined;

var _assignable = require('../../utils/assignable');

var _assignable2 = _interopRequireDefault(_assignable);

var _factories = require('./validations/factories');

var _testRun = require('../../errors/test-run');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var integerOption = exports.integerOption = (0, _factories.createIntegerValidator)(_testRun.ActionIntegerOptionError); // -------------------------------------------------------------
// WARNING: this file is used by both the client and the server.
// Do not use any browser or node-specific API!
// -------------------------------------------------------------

var positiveIntegerOption = exports.positiveIntegerOption = (0, _factories.createPositiveIntegerValidator)(_testRun.ActionPositiveIntegerOptionError);
var booleanOption = exports.booleanOption = (0, _factories.createBooleanValidator)(_testRun.ActionBooleanOptionError);
var speedOption = exports.speedOption = (0, _factories.createSpeedValidator)(_testRun.ActionSpeedOptionError);

// Acitons
class ActionOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.speed = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'speed', type: speedOption }];
    }
}

exports.ActionOptions = ActionOptions; // Offset

class OffsetOptions extends ActionOptions {
    constructor(obj, validate) {
        super();

        this.offsetX = null;
        this.offsetY = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'offsetX', type: integerOption }, { name: 'offsetY', type: integerOption }]);
    }
}

exports.OffsetOptions = OffsetOptions;
class ScrollOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();

        this.scrollToCenter = false;
        this.skipParentFrames = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'scrollToCenter', type: booleanOption }, { name: 'skipParentFrames', type: booleanOption }]);
    }
}

exports.ScrollOptions = ScrollOptions; // Element Screenshot

class ElementScreenshotOptions extends ActionOptions {
    constructor(obj, validate) {
        super();

        this.scrollTargetX = null;
        this.scrollTargetY = null;
        this.includeMargins = false;
        this.includeBorders = true;
        this.includePaddings = true;

        this.crop = {
            left: null,
            right: null,
            top: null,
            bottom: null
        };

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'scrollTargetX', type: integerOption }, { name: 'scrollTargetY', type: integerOption }, { name: 'crop.left', type: integerOption }, { name: 'crop.right', type: integerOption }, { name: 'crop.top', type: integerOption }, { name: 'crop.bottom', type: integerOption }, { name: 'includeMargins', type: booleanOption }, { name: 'includeBorders', type: booleanOption }, { name: 'includePaddings', type: booleanOption }]);
    }
}

exports.ElementScreenshotOptions = ElementScreenshotOptions; // Mouse

class MouseOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();

        this.modifiers = {
            ctrl: false,
            alt: false,
            shift: false,
            meta: false
        };

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'modifiers.ctrl', type: booleanOption }, { name: 'modifiers.alt', type: booleanOption }, { name: 'modifiers.shift', type: booleanOption }, { name: 'modifiers.meta', type: booleanOption }]);
    }
}

exports.MouseOptions = MouseOptions; // Click

class ClickOptions extends MouseOptions {
    constructor(obj, validate) {
        super();

        this.caretPos = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'caretPos', type: positiveIntegerOption }]);
    }
}

exports.ClickOptions = ClickOptions; // Move

class MoveOptions extends MouseOptions {
    constructor(obj, validate) {
        super();

        this.speed = null;
        this.minMovingTime = null;
        this.holdLeftButton = false;
        this.skipScrolling = false;
        this.skipDefaultDragBehavior = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'speed' }, { name: 'minMovingTime' }, { name: 'holdLeftButton' }, { name: 'skipScrolling', type: booleanOption }, { name: 'skipDefaultDragBehavior', type: booleanOption }]);
    }
}

exports.MoveOptions = MoveOptions; // Type

class TypeOptions extends ClickOptions {
    constructor(obj, validate) {
        super();

        this.replace = false;
        this.paste = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'replace', type: booleanOption }, { name: 'paste', type: booleanOption }]);
    }
}

exports.TypeOptions = TypeOptions; // DragToElement

class DragToElementOptions extends MouseOptions {
    constructor(obj, validate) {
        super(obj, validate);

        this.destinationOffsetX = null;
        this.destinationOffsetY = null;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return super._getAssignableProperties().concat([{ name: 'destinationOffsetX', type: integerOption }, { name: 'destinationOffsetY', type: integerOption }]);
    }
}

exports.DragToElementOptions = DragToElementOptions; //ResizeToFitDevice

class ResizeToFitDeviceOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.portraitOrientation = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'portraitOrientation', type: booleanOption }];
    }
}

exports.ResizeToFitDeviceOptions = ResizeToFitDeviceOptions; //Assertion

class AssertionOptions extends _assignable2.default {
    constructor(obj, validate) {
        super();

        this.timeout = void 0;
        this.allowUnawaitedPromise = false;

        this._assignFrom(obj, validate);
    }

    _getAssignableProperties() {
        return [{ name: 'timeout', type: positiveIntegerOption }, { name: 'allowUnawaitedPromise', type: booleanOption }];
    }
}
exports.AssertionOptions = AssertionOptions;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXN0LXJ1bi9jb21tYW5kcy9vcHRpb25zLmpzIl0sIm5hbWVzIjpbImludGVnZXJPcHRpb24iLCJBY3Rpb25JbnRlZ2VyT3B0aW9uRXJyb3IiLCJwb3NpdGl2ZUludGVnZXJPcHRpb24iLCJBY3Rpb25Qb3NpdGl2ZUludGVnZXJPcHRpb25FcnJvciIsImJvb2xlYW5PcHRpb24iLCJBY3Rpb25Cb29sZWFuT3B0aW9uRXJyb3IiLCJzcGVlZE9wdGlvbiIsIkFjdGlvblNwZWVkT3B0aW9uRXJyb3IiLCJBY3Rpb25PcHRpb25zIiwiQXNzaWduYWJsZSIsImNvbnN0cnVjdG9yIiwib2JqIiwidmFsaWRhdGUiLCJzcGVlZCIsIl9hc3NpZ25Gcm9tIiwiX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzIiwibmFtZSIsInR5cGUiLCJPZmZzZXRPcHRpb25zIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjb25jYXQiLCJTY3JvbGxPcHRpb25zIiwic2Nyb2xsVG9DZW50ZXIiLCJza2lwUGFyZW50RnJhbWVzIiwiRWxlbWVudFNjcmVlbnNob3RPcHRpb25zIiwic2Nyb2xsVGFyZ2V0WCIsInNjcm9sbFRhcmdldFkiLCJpbmNsdWRlTWFyZ2lucyIsImluY2x1ZGVCb3JkZXJzIiwiaW5jbHVkZVBhZGRpbmdzIiwiY3JvcCIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsIk1vdXNlT3B0aW9ucyIsIm1vZGlmaWVycyIsImN0cmwiLCJhbHQiLCJzaGlmdCIsIm1ldGEiLCJDbGlja09wdGlvbnMiLCJjYXJldFBvcyIsIk1vdmVPcHRpb25zIiwibWluTW92aW5nVGltZSIsImhvbGRMZWZ0QnV0dG9uIiwic2tpcFNjcm9sbGluZyIsInNraXBEZWZhdWx0RHJhZ0JlaGF2aW9yIiwiVHlwZU9wdGlvbnMiLCJyZXBsYWNlIiwicGFzdGUiLCJEcmFnVG9FbGVtZW50T3B0aW9ucyIsImRlc3RpbmF0aW9uT2Zmc2V0WCIsImRlc3RpbmF0aW9uT2Zmc2V0WSIsIlJlc2l6ZVRvRml0RGV2aWNlT3B0aW9ucyIsInBvcnRyYWl0T3JpZW50YXRpb24iLCJBc3NlcnRpb25PcHRpb25zIiwidGltZW91dCIsImFsbG93VW5hd2FpdGVkUHJvbWlzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFLQTs7OztBQUNBOztBQU1BOzs7O0FBT08sSUFBSUEsd0NBQXdCLHVDQUF1QkMsaUNBQXZCLENBQTVCLEMsQ0FuQlA7QUFDQTtBQUNBO0FBQ0E7O0FBaUJPLElBQUlDLHdEQUF3QiwrQ0FBK0JDLHlDQUEvQixDQUE1QjtBQUNBLElBQUlDLHdDQUF3Qix1Q0FBdUJDLGlDQUF2QixDQUE1QjtBQUNBLElBQUlDLG9DQUF3QixxQ0FBcUJDLCtCQUFyQixDQUE1Qjs7QUFHUDtBQUNPLE1BQU1DLGFBQU4sU0FBNEJDLG9CQUE1QixDQUF1QztBQUMxQ0MsZ0JBQWFDLEdBQWIsRUFBa0JDLFFBQWxCLEVBQTRCO0FBQ3hCOztBQUVBLGFBQUtDLEtBQUwsR0FBYSxJQUFiOztBQUVBLGFBQUtDLFdBQUwsQ0FBaUJILEdBQWpCLEVBQXNCQyxRQUF0QjtBQUNIOztBQUVERywrQkFBNEI7QUFDeEIsZUFBTyxDQUNILEVBQUVDLE1BQU0sT0FBUixFQUFpQkMsTUFBTVgsV0FBdkIsRUFERyxDQUFQO0FBR0g7QUFieUM7O1FBQWpDRSxhLEdBQUFBLGEsRUFnQmI7O0FBQ08sTUFBTVUsYUFBTixTQUE0QlYsYUFBNUIsQ0FBMEM7QUFDN0NFLGdCQUFhQyxHQUFiLEVBQWtCQyxRQUFsQixFQUE0QjtBQUN4Qjs7QUFFQSxhQUFLTyxPQUFMLEdBQWUsSUFBZjtBQUNBLGFBQUtDLE9BQUwsR0FBZSxJQUFmOztBQUVBLGFBQUtOLFdBQUwsQ0FBaUJILEdBQWpCLEVBQXNCQyxRQUF0QjtBQUNIOztBQUVERywrQkFBNEI7QUFDeEIsZUFBTyxNQUFNQSx3QkFBTixHQUFpQ00sTUFBakMsQ0FBd0MsQ0FDM0MsRUFBRUwsTUFBTSxTQUFSLEVBQW1CQyxNQUFNakIsYUFBekIsRUFEMkMsRUFFM0MsRUFBRWdCLE1BQU0sU0FBUixF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QUFhQyxHQUFiLEVBQWtCQyxRQUFsQixFQUE0QjtBQUN4Qjs7QUFFQSxhQUFLNEMsbUJBQUwsR0FBMkIsS0FBM0I7O0FBRUEsYUFBSzFDLFdBQUwsQ0FBaUJILEdBQWpCLEVBQXNCQyxRQUF0QjtBQUNIOztBQUVERywrQkFBNEI7QUFDeEIsZUFBTyxDQUNILEVBQUVDLE1BQU0scUJBQVIsRUFBK0JDLE1BQU1iLGFBQXJDLEVBREcsQ0FBUDtBQUdIO0FBYm9EOztRQUE1Q21ELHdCLEdBQUFBLHdCLEVBZ0JiOztBQUNPLE1BQU1FLGdCQUFOLFNBQStCaEQsb0JBQS9CLENBQTBDO0FBQzdDQyxnQkFBYUMsR0FBYixFQUFrQkMsUUFBbEIsRUFBNEI7QUFDeEI7O0FBRUEsYUFBSzhDLE9BQUwsR0FBNkIsS0FBSyxDQUFsQztBQUNBLGFBQUtDLHFCQUFMLEdBQTZCLEtBQTdCOztBQUVBLGFBQUs3QyxXQUFMLENBQWlCSCxHQUFqQixFQUFzQkMsUUFBdEI7QUFDSDs7QUFFREcsK0JBQTRCO0FBQ3hCLGVBQU8sQ0FDSCxFQUFFQyxNQUFNLFNBQVIsRUFBbUJDLE1BQU1mLHFCQUF6QixFQURHLEVBRUgsRUFBRWMsTUFBTSx1QkFBUixFQUFpQ0MsTUFBTWIsYUFBdkMsRUFGRyxDQUFQO0FBSUg7QUFmNEM7UUFBcENxRCxnQixHQUFBQSxnQiIsImZpbGUiOiJ0ZXN0LXJ1bi9jb21tYW5kcy9vcHRpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gV0FSTklORzogdGhpcyBmaWxlIGlzIHVzZWQgYnkgYm90aCB0aGUgY2xpZW50IGFuZCB0aGUgc2VydmVyLlxuLy8gRG8gbm90IHVzZSBhbnkgYnJvd3NlciBvciBub2RlLXNwZWNpZmljIEFQSSFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaW1wb3J0IEFzc2lnbmFibGUgZnJvbSAnLi4vLi4vdXRpbHMvYXNzaWduYWJsZSc7XG5pbXBvcnQge1xuICAgIGNyZWF0ZUJvb2xlYW5WYWxpZGF0b3IsXG4gICAgY3JlYXRlSW50ZWdlclZhbGlkYXRvcixcbiAgICBjcmVhdGVQb3NpdGl2ZUludGVnZXJWYWxpZGF0b3IsXG4gICAgY3JlYXRlU3BlZWRWYWxpZGF0b3Jcbn0gZnJvbSAnLi92YWxpZGF0aW9ucy9mYWN0b3JpZXMnO1xuaW1wb3J0IHtcbiAgICBBY3Rpb25JbnRlZ2VyT3B0aW9uRXJyb3IsXG4gICAgQWN0aW9uUG9zaXRpdmVJbnRlZ2VyT3B0aW9uRXJyb3IsXG4gICAgQWN0aW9uQm9vbGVhbk9wdGlvbkVycm9yLFxuICAgIEFjdGlvblNwZWVkT3B0aW9uRXJyb3Jcbn0gZnJvbSAnLi4vLi4vZXJyb3JzL3Rlc3QtcnVuJztcblxuZXhwb3J0IHZhciBpbnRlZ2VyT3B0aW9uICAgICAgICAgPSBjcmVhdGVJbnRlZ2VyVmFsaWRhdG9yKEFjdGlvbkludGVnZXJPcHRpb25FcnJvcik7XG5leHBvcnQgdmFyIHBvc2l0aXZlSW50ZWdlck9wdGlvbiA9IGNyZWF0ZVBvc2l0aXZlSW50ZWdlclZhbGlkYXRvcihBY3Rpb25Qb3NpdGl2ZUludGVnZXJPcHRpb25FcnJvcik7XG5leHBvcnQgdmFyIGJvb2xlYW5PcHRpb24gICAgICAgICA9IGNyZWF0ZUJvb2xlYW5WYWxpZGF0b3IoQWN0aW9uQm9vbGVhbk9wdGlvbkVycm9yKTtcbmV4cG9ydCB2YXIgc3BlZWRPcHRpb24gICAgICAgICAgID0gY3JlYXRlU3BlZWRWYWxpZGF0b3IoQWN0aW9uU3BlZWRPcHRpb25FcnJvcik7XG5cblxuLy8gQWNpdG9uc1xuZXhwb3J0IGNsYXNzIEFjdGlvbk9wdGlvbnMgZXh0ZW5kcyBBc3NpZ25hYmxlIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3BlZWQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3NwZWVkJywgdHlwZTogc3BlZWRPcHRpb24gfVxuICAgICAgICBdO1xuICAgIH1cbn1cblxuLy8gT2Zmc2V0XG5leHBvcnQgY2xhc3MgT2Zmc2V0T3B0aW9ucyBleHRlbmRzIEFjdGlvbk9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5vZmZzZXRYID0gbnVsbDtcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnb2Zmc2V0WCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ29mZnNldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2Nyb2xsT3B0aW9ucyBleHRlbmRzIE9mZnNldE9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxUb0NlbnRlciAgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2tpcFBhcmVudEZyYW1lcyA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdzY3JvbGxUb0NlbnRlcicsIHR5cGU6IGJvb2xlYW5PcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3NraXBQYXJlbnRGcmFtZXMnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBFbGVtZW50IFNjcmVlbnNob3RcbmV4cG9ydCBjbGFzcyBFbGVtZW50U2NyZWVuc2hvdE9wdGlvbnMgZXh0ZW5kcyBBY3Rpb25PcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0WCAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXRZICAgPSBudWxsO1xuICAgICAgICB0aGlzLmluY2x1ZGVNYXJnaW5zICA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluY2x1ZGVCb3JkZXJzICA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5jbHVkZVBhZGRpbmdzID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmNyb3AgPSB7XG4gICAgICAgICAgICBsZWZ0OiAgIG51bGwsXG4gICAgICAgICAgICByaWdodDogIG51bGwsXG4gICAgICAgICAgICB0b3A6ICAgIG51bGwsXG4gICAgICAgICAgICBib3R0b206IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnc2Nyb2xsVGFyZ2V0WCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3Njcm9sbFRhcmdldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLmxlZnQnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLnJpZ2h0JywgdHlwZTogaW50ZWdlck9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnY3JvcC50b3AnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLmJvdHRvbScsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2luY2x1ZGVNYXJnaW5zJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnaW5jbHVkZUJvcmRlcnMnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdpbmNsdWRlUGFkZGluZ3MnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBNb3VzZVxuZXhwb3J0IGNsYXNzIE1vdXNlT3B0aW9ucyBleHRlbmRzIE9mZnNldE9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5tb2RpZmllcnMgPSB7XG4gICAgICAgICAgICBjdHJsOiAgZmFsc2UsXG4gICAgICAgICAgICBhbHQ6ICAgZmFsc2UsXG4gICAgICAgICAgICBzaGlmdDogZmFsc2UsXG4gICAgICAgICAgICBtZXRhOiAgZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLmN0cmwnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtb2RpZmllcnMuYWx0JywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLnNoaWZ0JywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLm1ldGEnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG5cbi8vIENsaWNrXG5leHBvcnQgY2xhc3MgQ2xpY2tPcHRpb25zIGV4dGVuZHMgTW91c2VPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuY2FyZXRQb3MgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdjYXJldFBvcycsIHR5cGU6IHBvc2l0aXZlSW50ZWdlck9wdGlvbiB9XG4gICAgICAgIF0pO1xuICAgIH1cbn1cblxuLy8gTW92ZVxuZXhwb3J0IGNsYXNzIE1vdmVPcHRpb25zIGV4dGVuZHMgTW91c2VPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3BlZWQgICAgICAgICAgICAgICAgICAgPSBudWxsO1xuICAgICAgICB0aGlzLm1pbk1vdmluZ1RpbWUgICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5ob2xkTGVmdEJ1dHRvbiAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNraXBTY3JvbGxpbmcgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2tpcERlZmF1bHREcmFnQmVoYXZpb3IgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnc3BlZWQnIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtaW5Nb3ZpbmdUaW1lJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnaG9sZExlZnRCdXR0b24nIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdza2lwU2Nyb2xsaW5nJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnc2tpcERlZmF1bHREcmFnQmVoYXZpb3InLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBUeXBlXG5leHBvcnQgY2xhc3MgVHlwZU9wdGlvbnMgZXh0ZW5kcyBDbGlja09wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5yZXBsYWNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFzdGUgICA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdyZXBsYWNlJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAncGFzdGUnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBEcmFnVG9FbGVtZW50XG5leHBvcnQgY2xhc3MgRHJhZ1RvRWxlbWVudE9wdGlvbnMgZXh0ZW5kcyBNb3VzZU9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKG9iaiwgdmFsaWRhdGUpO1xuXG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25PZmZzZXRYID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbk9mZnNldFkgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdkZXN0aW5hdGlvbk9mZnNldFgnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdkZXN0aW5hdGlvbk9mZnNldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vL1Jlc2l6ZVRvRml0RGV2aWNlXG5leHBvcnQgY2xhc3MgUmVzaXplVG9GaXREZXZpY2VPcHRpb25zIGV4dGVuZHMgQXNzaWduYWJsZSB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnBvcnRyYWl0T3JpZW50YXRpb24gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7IG5hbWU6ICdwb3J0cmFpdE9yaWVudGF0aW9uJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9XG4gICAgICAgIF07XG4gICAgfVxufVxuXG4vL0Fzc2VydGlvblxuZXhwb3J0IGNsYXNzIEFzc2VydGlvbk9wdGlvbnMgZXh0ZW5kcyBBc3NpZ25hYmxlIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMudGltZW91dCAgICAgICAgICAgICAgID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmFsbG93VW5hd2FpdGVkUHJvbWlzZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3RpbWVvdXQnLCB0eXBlOiBwb3NpdGl2ZUludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2FsbG93VW5hd2FpdGVkUHJvbWlzZScsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdO1xuICAgIH1cbn1cbiJdfQ==
