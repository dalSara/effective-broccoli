'use strict';

exports.__esModule = true;

var _dedent = require('dedent');

var _dedent2 = _interopRequireDefault(_dedent);

var _lodash = require('lodash');

var _type = require('./type');

var _type2 = _interopRequireDefault(_type);

var _phase = require('../../test-run/phase');

var _phase2 = _interopRequireDefault(_phase);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const SUBTITLES = {
    [_phase2.default.initial]: '',
    [_phase2.default.inFixtureBeforeHook]: '<span class="subtitle">Error in fixture.before hook</span>\n',
    [_phase2.default.inFixtureBeforeEachHook]: '<span class="subtitle">Error in fixture.beforeEach hook</span>\n',
    [_phase2.default.inTestBeforeHook]: '<span class="subtitle">Error in test.before hook</span>\n',
    [_phase2.default.inTest]: '',
    [_phase2.default.inTestAfterHook]: '<span class="subtitle">Error in test.after hook</span>\n',
    [_phase2.default.inFixtureAfterEachHook]: '<span class="subtitle">Error in fixture.afterEach hook</span>\n',
    [_phase2.default.inFixtureAfterHook]: '<span class="subtitle">Error in fixture.after hook</span>\n',
    [_phase2.default.inRoleInitializer]: '<span class="subtitle">Error in Role initializer</span>\n',
    [_phase2.default.inBookmarkRestore]: '<span class="subtitle">Error while restoring configuration after Role switch</span>\n'
};

function formatSelectorCallstack(apiFnChain, apiFnIndex, viewportWidth) {
    if (typeof apiFnIndex === 'undefined') return '';

    const emptySpaces = 10;
    const ellipsis = '...)';
    const availableWidth = viewportWidth - emptySpaces;

    return apiFnChain.map((apiFn, index) => {
        let formattedApiFn = String.fromCharCode(160);

        formattedApiFn += index === apiFnIndex ? '>' : ' ';
        formattedApiFn += ' | ';
        formattedApiFn += index !== 0 ? '  ' : '';
        formattedApiFn += apiFn;

        if (formattedApiFn.length > availableWidth) return formattedApiFn.substr(0, availableWidth - emptySpaces) + ellipsis;

        return formattedApiFn;
    }).join('\n');
}

function markup(err, msgMarkup, opts = {}) {
    msgMarkup = (0, _dedent2.default)(`
        ${SUBTITLES[err.testRunPhase]}<div class="message">${(0, _dedent2.default)(msgMarkup)}</div>

        <strong>Browser:</strong> <span class="user-agent">${err.userAgent}</span>
    `);

    if (err.screenshotPath) msgMarkup += `\n<div class="screenshot-info"><strong>Screenshot:</strong> <a class="screenshot-path">${(0, _lodash.escape)(err.screenshotPath)}</a></div>`;

    if (!opts.withoutCallsite) {
        var callsiteMarkup = err.getCallsiteMarkup();

        if (callsiteMarkup) msgMarkup += `\n\n${callsiteMarkup}`;
    }

    return msgMarkup;
}

exports.default = {
    [_type2.default.actionIntegerOptionError]: err => markup(err, `
        The "${err.optionName}" option is expected to be an integer, but it was ${err.actualValue}.
    `),

    [_type2.default.actionPositiveIntegerOptionError]: err => markup(err, `
        The "${err.optionName}" option is expected to be a positive integer, but it was ${err.actualValue}.
    `),

    [_type2.default.actionBooleanOptionError]: err => markup(err, `
        The "${err.optionName}" option is expected to be a boolean value, but it was ${err.actualValue}.
    `),

    [_type2.default.actionSpeedOptionError]: err => markup(err, `
        The "${err.optionName}" option is expected to be a number between 0.01 and 1, but it was ${err.actualValue}.
    `),

    [_type2.default.pageLoadError]: err => markup(err, `
        ${err.errMsg}
    `),

    [_type2.default.uncaughtErrorOnPage]: err => markup(err, `
        Error on page <a href="${err.pageDestUrl}">${err.pageDestUrl}</a>:

        ${(0, _lodash.escape)(err.errMsg)}
    `),

    [_type2.default.uncaughtErrorInTestCode]: err => markup(err, `
        ${(0, _lodash.escape)(err.errMsg)}
    `),

    [_type2.default.nativeDialogNotHandledError]: err => markup(err, `
        A native ${err.dialogType} dialog was invoked on page <a href="${err.pageUrl}">${err.pageUrl}</a>, but no handler was set for it. Use the "setNativeDialogHandler" function to introduce a handler function for native dialogs.
    `),

    [_type2.default.uncaughtErrorInNativeDialogHandler]: err => markup(err, `
        An error occurred in the native dialog handler called for a native ${err.dialogType} dialog on page <a href="${err.pageUrl}">${err.pageUrl}</a>:

        ${(0, _lodash.escape)(err.errMsg)}
    `),

    [_type2.default.setTestSpeedArgumentError]: err => markup(err, `
        Speed is expected to be a number between 0.01 and 1, but ${err.actualValue} was passed.
    `),

    [_type2.default.setNativeDialogHandlerCodeWrongTypeError]: err => markup(err, `
        The native dialog handler is expected to be a function, ClientFunction or null, but it was ${err.actualType}.
    `),

    [_type2.default.uncaughtErrorInClientFunctionCode]: err => markup(err, `
        An error occurred in ${err.instantiationCallsiteName} code:

        ${(0, _lodash.escape)(err.errMsg)}
    `),

    [_type2.default.uncaughtErrorInCustomDOMPropertyCode]: err => markup(err, `
        An error occurred when trying to calculate a custom Selector property "${err.property}":

        ${(0, _lodash.escape)(err.errMsg)}
    `),

    [_type2.default.clientFunctionExecutionInterruptionError]: err => markup(err, `
        ${err.instantiationCallsiteName} execution was interrupted by page unload. This problem may appear if you trigger page navigation from ${err.instantiationCallsiteName} code.
    `),

    [_type2.default.uncaughtNonErrorObjectInTestCode]: err => markup(err, `
        Uncaught ${err.objType} "${(0, _lodash.escape)(err.objStr)}" was thrown. Throw Error instead.
    `, { withoutCallsite: true }),

    [_type2.default.unhandledPromiseRejection]: err => markup(err, `
        Unhandled promise rejection:
        
        ${(0, _lodash.escape)(err.errMsg)}
    `, { withoutCallsite: true }),

    [_type2.default.uncaughtException]: err => markup(err, `
        Uncaught exception:
        
        ${(0, _lodash.escape)(err.errMsg)}
    `, { withoutCallsite: true }),

    [_type2.default.actionOptionsTypeError]: err => markup(err, `
        Action options is expected to be an object, null or undefined but it was ${err.actualType}.
    `),

    [_type2.default.actionStringArgumentError]: err => markup(err, `
        The "${err.argumentName}" argument is expected to be a non-empty string, but it was ${err.actualValue}.
    `),

    [_type2.default.actionBooleanArgumentError]: err => markup(err, `
        The "${err.argumentName}" argument is expected to be a boolean value, but it was ${err.actualValue}.
    `),

    [_type2.default.actionNullableStringArgumentError]: err => markup(err, `
        The "${err.argumentName}" argument is expected to be a null or a string, but it was ${err.actualValue}.
    `),

    [_type2.default.actionStringOrStringArrayArgumentError]: err => markup(err, `
        The "${err.argumentName}" argument is expected to be a non-empty string or a string array, but it was ${err.actualValue}.
    `),

    [_type2.default.actionStringArrayElementError]: err => markup(err, `
        Elements of the "${err.argumentName}" argument are expected to be non-empty strings, but the element at index ${err.elementIndex} was ${err.actualValue}.
    `),

    [_type2.default.actionIntegerArgumentError]: err => markup(err, `
        The "${err.argumentName}" argument is expected to be an integer, but it was ${err.actualValue}.
    `),

    [_type2.default.actionRoleArgumentError]: err => markup(err, `
        The "${err.argumentName}" argument is expected to be a Role instance, but it was ${err.actualValue}.
    `),

    [_type2.default.actionPositiveIntegerArgumentError]: err => markup(err, `
        The "${err.argumentName}" argument is expected to be a positive integer, but it was ${err.actualValue}.
    `),

    [_type2.default.actionElementNotFoundError]: (err, viewportWidth) => markup(err, `
        The specified selector does not match any element in the DOM tree.
        
        ${formatSelectorCallstack(err.apiFnChain, err.apiFnIndex, viewportWidth)}
    `),

    [_type2.default.actionElementIsInvisibleError]: err => markup(err, `
        The element that matches the specified selector is not visible.
    `),

    [_type2.default.actionSelectorMatchesWrongNodeTypeError]: err => markup(err, `
        The specified selector is expected to match a DOM element, but it matches a ${err.nodeDescription} node.
    `),

    [_type2.default.actionAdditionalElementNotFoundError]: (err, viewportWidth) => markup(err, `
        The specified "${err.argumentName}" does not match any element in the DOM tree.
        
        ${formatSelectorCallstack(err.apiFnChain, err.apiFnIndex, viewportWidth)}
    `),

    [_type2.default.actionAdditionalElementIsInvisibleError]: err => markup(err, `
        The element that matches the specified "${err.argumentName}" is not visible.
    `),

    [_type2.default.actionAdditionalSelectorMatchesWrongNodeTypeError]: err => markup(err, `
        The specified "${err.argumentName}" is expected to match a DOM element, but it matches a ${err.nodeDescription} node.
    `),

    [_type2.default.actionElementNonEditableError]: err => markup(err, `
        The action element is expected to be editable (an input, textarea or element with the contentEditable attribute).
    `),

    [_type2.default.actionElementNonContentEditableError]: err => markup(err, `
        The element that matches the specified "${err.argumentName}" is expected to have the contentEditable attribute enabled or the entire document should be in design mode.
    `),

    [_type2.default.actionRootContainerNotFoundError]: err => markup(err, `
        Content between the action elements cannot be selected because the root container for the selection range cannot be found, i.e. these elements do not have a common ancestor with the contentEditable attribute.
    `),

    [_type2.default.actionElementIsNotFileInputError]: err => markup(err, `
        The specified selector does not match a file input element.
    `),

    [_type2.default.actionCanNotFindFileToUploadError]: err => markup(err, `
        Cannot find the following file(s) to upload:
        ${err.filePaths.map(path => `  ${(0, _lodash.escape)(path)}`).join('\n')}
    `),

    [_type2.default.actionElementNotTextAreaError]: err => markup(err, `
        The action element is expected to be a &lt;textarea&gt;.
    `),

    [_type2.default.actionElementNotIframeError]: err => markup(err, `
        The action element is expected to be an &lt;iframe&gt.
    `),

    [_type2.default.actionIncorrectKeysError]: err => markup(err, `
        The "${err.argumentName}" argument contains an incorrect key or key combination.
    `),

    [_type2.default.actionUnsupportedDeviceTypeError]: err => markup(err, `
        The "${err.argumentName}" argument specifies an unsupported "${err.actualValue}" device. For a list of supported devices, refer to <a href="http://viewportsizes.com">http://viewportsizes.com</a>.
    `),

    [_type2.default.actionInvalidScrollTargetError]: err => markup(err, `
        Unable to scroll to the specified point because a point with the specified ${err.properties} is not located inside the element's cropping region.
    `),

    [_type2.default.actionIframeIsNotLoadedError]: err => markup(err, `
        Content of the iframe to which you are switching did not load.
    `),

    [_type2.default.currentIframeIsNotLoadedError]: err => markup(err, `
        Content of the iframe in which the test is currently operating did not load.
    `),

    [_type2.default.currentIframeNotFoundError]: err => markup(err, `
        The iframe in which the test is currently operating does not exist anymore.
    `),

    [_type2.default.currentIframeIsInvisibleError]: err => markup(err, `
        The iframe in which the test is currently operating is not visible anymore.
    `),

    [_type2.default.missingAwaitError]: err => markup(err, `
        A call to an async function is not awaited. Use the "await" keyword before actions, assertions or chains of them to ensure that they run in the right sequence.
    `),

    [_type2.default.externalAssertionLibraryError]: err => markup(err, `
        ${(0, _lodash.escape)(err.errMsg)}
    `),

    [_type2.default.domNodeClientFunctionResultError]: err => markup(err, `
       ${err.instantiationCallsiteName} cannot return DOM elements. Use Selector functions for this purpose.
    `),

    [_type2.default.invalidSelectorResultError]: err => markup(err, `
        Function that specifies a selector can only return a DOM node, an array of nodes, NodeList, HTMLCollection, null or undefined. Use ClientFunction to return other values.
    `),

    [_type2.default.actionSelectorError]: err => markup(err, `
        Action "${err.selectorName}" argument error:

        ${(0, _lodash.escape)(err.errMsg)}
    `),

    [_type2.default.cantObtainInfoForElementSpecifiedBySelectorError]: (err, viewportWidth) => markup(err, `
        Cannot obtain information about the node because the specified selector does not match any node in the DOM tree.
        
        ${formatSelectorCallstack(err.apiFnChain, err.apiFnIndex, viewportWidth)}
    `),

    [_type2.default.windowDimensionsOverflowError]: err => markup(err, `
        Unable to resize the window because the specified size exceeds the screen size. On macOS, a window cannot be larger than the screen.
    `),

    [_type2.default.invalidElementScreenshotDimensionsError]: err => markup(err, `
         Unable to capture an element image because the resulting image ${err.dimensions} ${err.verb} zero or negative.
    `),

    [_type2.default.roleSwitchInRoleInitializerError]: err => markup(err, `
        Role cannot be switched while another role is being initialized.
    `),

    [_type2.default.assertionExecutableArgumentError]: err => markup(err, `
        Cannot evaluate the "${err.actualValue}" expression in the "${err.argumentName}" parameter because of the following error:

        ${err.errMsg}
    `),

    [_type2.default.assertionUnawaitedPromiseError]: err => markup(err, `
        Attempted to run assertions on a Promise object. Did you forget to await it? If not, pass "{ allowUnawaitedPromise: true }" to the assertion options.
    `)
};
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9lcnJvcnMvdGVzdC1ydW4vdGVtcGxhdGVzLmpzIl0sIm5hbWVzIjpbIlNVQlRJVExFUyIsIlRFU1RfUlVOX1BIQVNFIiwiaW5pdGlhbCIsImluRml4dHVyZUJlZm9yZUhvb2siLCJpbkZpeHR1cmVCZWZvcmVFYWNoSG9vayIsImluVGVzdEJlZm9yZUhvb2siLCJpblRlc3QiLCJpblRlc3RBZnRlckhvb2siLCJpbkZpeHR1cmVBZnRlckVhY2hIb29rIiwiaW5GaXh0dXJlQWZ0ZXJIb29rIiwiaW5Sb2xlSW5pdGlhbGl6ZXIiLCJpbkJvb2ttYXJrUmVzdG9yZSIsImZvcm1hdFNlbGVjdG9yQ2FsbHN0YWNrIiwiYXBpRm5DaGFpbiIsImFwaUZuSW5kZXgiLCJ2aWV3cG9ydFdpZHRoIiwiZW1wdHlTcGFjZXMiLCJlbGxpcHNpcyIsImF2YWlsYWJsZVdpZHRoIiwibWFwIiwiYXBpRm4iLCJpbmRleCIsImZvcm1hdHRlZEFwaUZuIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwibGVuZ3RoIiwic3Vic3RyIiwiam9pbiIsIm1hcmt1cCIsImVyciIsIm1zZ01hcmt1cCIsIm9wdHMiLCJ0ZXN0UnVuUGhhc2UiLCJ1c2VyQWdlbnQiLCJzY3JlZW5zaG90UGF0aCIsIndpdGhvdXRDYWxsc2l0ZSIsImNhbGxzaXRlTWFya3VwIiwiZ2V0Q2FsbHNpdGVNYXJrdXAiLCJUWVBFIiwiYWN0aW9uSW50ZWdlck9wdGlvbkVycm9yIiwib3B0aW9uTmFtZSIsImFjdHVhbFZhbHVlIiwiYWN0aW9uUG9zaXRpdmVJbnRlZ2VyT3B0aW9uRXJyb3IiLCJhY3Rpb25Cb29sZWFuT3B0aW9uRXJyb3IiLCJhY3Rpb25TcGVlZE9wdGlvbkVycm9yIiwicGFnZUxvYWRFcnJvciIsImVyck1zZyIsInVuY2F1Z2h0RXJyb3JPblBhZ2UiLCJwYWdlRGVzdFVybCIsInVuY2F1Z2h0RXJyb3JJblRlc3RDb2RlIiwibmF0aXZlRGlhbG9nTm90SGFuZGxlZEVycm9yIiwiZGlhbG9nVHlwZSIsInBhZ2VVcmwiLCJ1bmNhdWdodEVycm9ySW5OYXRpdmVEaWFsb2dIYW5kbGVyIiwic2V0VGVzdFNwZWVkQXJndW1lbnRFcnJvciIsInNldE5hdGl2ZURpYWxvZ0hhbmRsZXJDb2RlV3JvbmdUeXBlRXJyb3IiLCJhY3R1YWxUeXBlIiwidW5jYXVnaHRFcnJvckluQ2xpZW50RnVuY3Rpb25Db2RlIiwiaW5zdGFudGlhdGlvbkNhbGxzaXRlTmFtZSIsInVuY2F1Z2h0RXJyb3JJbkN1c3RvbURPTVByb3BlcnR5Q29kZSIsInByb3BlcnR5IiwiY2xpZW50RnVuY3Rpb25FeGVjdXRpb25JbnRlcnJ1cHRpb25FcnJvciIsInVuY2F1Z2h0Tm9uRXJyb3JPYmplY3RJblRlc3RDb2RlIiwib2JqVHlwZSIsIm9ialN0ciIsInVuaGFuZGxlZFByb21pc2VSZWplY3Rpb24iLCJ1bmNhdWdodEV4Y2VwdGlvbiIsImFjdGlvbk9wdGlvbnNUeXBlRXJyb3IiLCJhY3Rpb25TdHJpbmdBcmd1bWVudEVycm9yIiwiYXJndW1lbnROYW1lIiwiYWN0aW9uQm9vbGVhbkFyZ3VtZW50RXJyb3IiLCJhY3Rpb25OdWxsYWJsZVN0cmluZ0FyZ3VtZW50RXJyb3IiLCJhY3Rpb25TdHJpbmdPclN0cmluZ0FycmF5QXJndW1lbnRFcnJvciIsImFjdGlvblN0cmluZ0FycmF5RWxlbWVudEVycm9yIiwiZWxlbWVudEluZGV4IiwiYWN0aW9uSW50ZWdlckFyZ3VtZW50RXJyb3IiLCJhY3Rpb25Sb2xlQXJndW1lbnRFcnJvciIsImFjdGlvblBvc2l0aXZlSW50ZWdlckFyZ3VtZW50RXJyb3IiLCJhY3Rpb25FbGVtZW50Tm90Rm91bmRFcnJvciIsImFjdGlvbkVsZW1lbnRJc0ludmlzaWJsZUVycm9yIiwiYWN0aW9uU2VsZWN0b3JNYXRjaGVzV3JvbmdOb2RlVHlwZUVycm9yIiwibm9kZURlc2NyaXB0aW9uIiwiYWN0aW9uQWRkaXRpb25hbEVsZW1lbnROb3RGb3VuZEVycm9yIiwiYWN0aW9uQWRkaXRpb25hbEVsZW1lbnRJc0ludmlzaWJsZUVycm9yIiwiYWN0aW9uQWRkaXRpb25hbFNlbGVjdG9yTWF0Y2hlc1dyb25nTm9kZVR5cGVFcnJvciIsImFjdGlvbkVsZW1lbnROb25FZGl0YWJsZUVycm9yIiwiYWN0aW9uRWxlbWVudE5vbkNvbnRlbnRFZGl0YWJsZUVycm9yIiwiYWN0aW9uUm9vdENvbnRhaW5lck5vdEZvdW5kRXJyb3IiLCJhY3Rpb25FbGVtZW50SXNOb3RGaWxlSW5wdXRFcnJvciIsImFjdGlvbkNhbk5vdEZpbmRGaWxlVG9VcGxvYWRFcnJvciIsImZpbGVQYXRocyIsInBhdGgiLCJhY3Rpb25FbGVtZW50Tm90VGV4dEFyZWFFcnJvciIsImFjdGlvbkVsZW1lbnROb3RJZnJhbWVFcnJvciIsImFjdGlvbkluY29ycmVjdEtleXNFcnJvciIsImFjdGlvblVuc3VwcG9ydGVkRGV2aWNlVHlwZUVycm9yIiwiYWN0aW9uSW52YWxpZFNjcm9sbFRhcmdldEVycm9yIiwicHJvcGVydGllcyIsImFjdGlvbklmcmFtZUlzTm90TG9hZGVkRXJyb3IiLCJjdXJyZW50SWZyYW1lSXNOb3RMb2FkZWRFcnJvciIsImN1cnJlbnRJZnJhbWVOb3RGb3VuZEVycm9yIiwiY3VycmVudElmcmFtZUlzSW52aXNpYmxlRXJyb3IiLCJtaXNzaW5nQXdhaXRFcnJvciIsImV4dGVybmFsQXNzZXJ0aW9uTGlicmFyeUVycm9yIiwiZG9tTm9kZUNsaWVudEZ1bmN0aW9uUmVzdWx0RXJyb3IiLCJpbnZhbGlkU2VsZWN0b3JSZXN1bHRFcnJvciIsImFjdGlvblNlbGVjdG9yRXJyb3IiLCJzZWxlY3Rvck5hbWUiLCJjYW50T2J0YWluSW5mb0ZvckVsZW1lbnRTcGVjaWZpZWRCeVNlbGVjdG9yRXJyb3IiLCJ3aW5kb3dEaW1lbnNpb25zT3ZlcmZsb3dFcnJvciIsImludmFsaWRFbGVtZW50U2NyZWVuc2hvdERpbWVuc2lvbnNFcnJvciIsImRpbWVuc2lvbnMiLCJ2ZXJiIiwicm9sZVN3aXRjaEluUm9sZUluaXRpYWxpemVyRXJyb3IiLCJhc3NlcnRpb25FeGVjdXRhYmxlQXJndW1lbnRFcnJvciIsImFzc2VydGlvblVuYXdhaXRlZFByb21pc2VFcnJvciJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsTUFBTUEsWUFBWTtBQUNkLEtBQUNDLGdCQUFlQyxPQUFoQixHQUEwQyxFQUQ1QjtBQUVkLEtBQUNELGdCQUFlRSxtQkFBaEIsR0FBMEMsOERBRjVCO0FBR2QsS0FBQ0YsZ0JBQWVHLHVCQUFoQixHQUEwQyxrRUFINUI7QUFJZCxLQUFDSCxnQkFBZUksZ0JBQWhCLEdBQTBDLDJEQUo1QjtBQUtkLEtBQUNKLGdCQUFlSyxNQUFoQixHQUEwQyxFQUw1QjtBQU1kLEtBQUNMLGdCQUFlTSxlQUFoQixHQUEwQywwREFONUI7QUFPZCxLQUFDTixnQkFBZU8sc0JBQWhCLEdBQTBDLGlFQVA1QjtBQVFkLEtBQUNQLGdCQUFlUSxrQkFBaEIsR0FBMEMsNkRBUjVCO0FBU2QsS0FBQ1IsZ0JBQWVTLGlCQUFoQixHQUEwQywyREFUNUI7QUFVZCxLQUFDVCxnQkFBZVUsaUJBQWhCLEdBQTBDO0FBVjVCLENBQWxCOztBQWFBLFNBQVNDLHVCQUFULENBQWtDQyxVQUFsQyxFQUE4Q0MsVUFBOUMsRUFBMERDLGFBQTFELEVBQXlFO0FBQ3JFLFFBQUksT0FBT0QsVUFBUCxLQUFzQixXQUExQixFQUNJLE9BQU8sRUFBUDs7QUFFSixVQUFNRSxjQUFpQixFQUF2QjtBQUNBLFVBQU1DLFdBQWlCLE1BQXZCO0FBQ0EsVUFBTUMsaUJBQWlCSCxnQkFBZ0JDLFdBQXZDOztBQUVBLFdBQU9ILFdBQVdNLEdBQVgsQ0FBZSxDQUFDQyxLQUFELEVBQVFDLEtBQVIsS0FBa0I7QUFDcEMsWUFBSUMsaUJBQWlCQyxPQUFPQyxZQUFQLENBQW9CLEdBQXBCLENBQXJCOztBQUVBRiwwQkFBa0JELFVBQVVQLFVBQVYsR0FBdUIsR0FBdkIsR0FBNkIsR0FBL0M7QUFDQVEsMEJBQWtCLEtBQWxCO0FBQ0FBLDBCQUFrQkQsVUFBVSxDQUFWLEdBQWMsSUFBZCxHQUFxQixFQUF2QztBQUNBQywwQkFBa0JGLEtBQWxCOztBQUVBLFlBQUlFLGVBQWVHLE1BQWYsR0FBd0JQLGNBQTVCLEVBQ0ksT0FBT0ksZUFBZUksTUFBZixDQUFzQixDQUF0QixFQUF5QlIsaUJBQWlCRixXQUExQyxJQUF5REMsUUFBaEU7O0FBRUosZUFBT0ssY0FBUDtBQUNILEtBWk0sRUFZSkssSUFaSSxDQVlDLElBWkQsQ0FBUDtBQWFIOztBQUVELFNBQVNDLE1BQVQsQ0FBaUJDLEdBQWpCLEVBQXNCQyxTQUF0QixFQUFpQ0MsT0FBTyxFQUF4QyxFQUE0QztBQUN4Q0QsZ0JBQVksc0JBQVE7VUFDZDlCLFVBQVU2QixJQUFJRyxZQUFkLENBQTRCLHdCQUF1QixzQkFBT0YsU0FBUCxDQUFrQjs7NkRBRWxCRCxJQUFJSSxTQUFVO0tBSDNELENBQVo7O0FBTUEsUUFBSUosSUFBSUssY0FBUixFQUNJSixhQUFjLDBGQUF5RixvQkFBV0QsSUFBSUssY0FBZixDQUErQixZQUF0STs7QUFFSixRQUFJLENBQUNILEtBQUtJLGVBQVYsRUFBMkI7QUFDdkIsWUFBSUMsaUJBQWlCUCxJQUFJUSxpQkFBSixFQUFyQjs7QUFFQSxZQUFJRCxjQUFKLEVBQ0lOLGFBQWMsT0FBTU0sY0FBZSxFQUFuQztBQUNQOztBQUVELFdBQU9OLFNBQVA7QUFDSDs7a0JBRWM7QUFDWCxLQUFDUSxlQUFLQyx3QkFBTixHQUFpQ1YsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQzFDQSxJQUFJVyxVQUFXLHFEQUFvRFgsSUFBSVksV0FBWTtLQUR0RCxDQUQ3Qjs7QUFLWCxLQUFDSCxlQUFLSSxnQ0FBTixHQUF5Q2IsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQ2xEQSxJQUFJVyxVQUFXLDZEQUE0RFgsSUFBSVksV0FBWTtLQUR0RCxDQUxyQzs7QUFTWCxLQUFDSCxlQUFLSyx3QkFBTixHQUFpQ2QsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQzFDQSxJQUFJVyxVQUFXLDBEQUF5RFgsSUFBSVksV0FBWTtLQUQzRCxDQVQ3Qjs7QUFhWCxLQUFDSCxlQUFLTSxzQkFBTixHQUErQmYsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQ3hDQSxJQUFJVyxVQUFXLHNFQUFxRVgsSUFBSVksV0FBWTtLQUR6RSxDQWIzQjs7QUFpQlgsS0FBQ0gsZUFBS08sYUFBTixHQUFzQmhCLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtVQUNwQ0EsSUFBSWlCLE1BQU87S0FEWSxDQWpCbEI7O0FBcUJYLEtBQUNSLGVBQUtTLG1CQUFOLEdBQTRCbEIsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2lDQUNuQkEsSUFBSW1CLFdBQVksS0FBSW5CLElBQUltQixXQUFZOztVQUUzRCxvQkFBV25CLElBQUlpQixNQUFmLENBQXVCO0tBSE0sQ0FyQnhCOztBQTJCWCxLQUFDUixlQUFLVyx1QkFBTixHQUFnQ3BCLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtVQUM5QyxvQkFBV0EsSUFBSWlCLE1BQWYsQ0FBdUI7S0FEVSxDQTNCNUI7O0FBK0JYLEtBQUNSLGVBQUtZLDJCQUFOLEdBQW9DckIsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO21CQUN6Q0EsSUFBSXNCLFVBQVcsd0NBQXVDdEIsSUFBSXVCLE9BQVEsS0FBSXZCLElBQUl1QixPQUFRO0tBRHRELENBL0JoQzs7QUFtQ1gsS0FBQ2QsZUFBS2Usa0NBQU4sR0FBMkN4QixPQUFPRCxPQUFPQyxHQUFQLEVBQWE7NkVBQ1VBLElBQUlzQixVQUFXLDRCQUEyQnRCLElBQUl1QixPQUFRLEtBQUl2QixJQUFJdUIsT0FBUTs7VUFFekksb0JBQVd2QixJQUFJaUIsTUFBZixDQUF1QjtLQUhxQixDQW5DdkM7O0FBeUNYLEtBQUNSLGVBQUtnQix5QkFBTixHQUFrQ3pCLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTttRUFDU0EsSUFBSVksV0FBWTtLQUR0QyxDQXpDOUI7O0FBNkNYLEtBQUNILGVBQUtpQix3Q0FBTixHQUFpRDFCLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtxR0FDNEJBLElBQUkyQixVQUFXO0tBRHhELENBN0M3Qzs7QUFpRFgsS0FBQ2xCLGVBQUttQixpQ0FBTixHQUEwQzVCLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTsrQkFDbkNBLElBQUk2Qix5QkFBMEI7O1VBRW5ELG9CQUFXN0IsSUFBSWlCLE1BQWYsQ0FBdUI7S0FIb0IsQ0FqRHRDOztBQXVEWCxLQUFDUixlQUFLcUIsb0NBQU4sR0FBNkM5QixPQUFPRCxPQUFPQyxHQUFQLEVBQWE7aUZBQ1lBLElBQUkrQixRQUFTOztVQUVwRixvQkFBVy9CLElBQUlpQixNQUFmLENBQXVCO0tBSHVCLENBdkR6Qzs7QUE2RFgsS0FBQ1IsZUFBS3VCLHdDQUFOLEdBQWlEaEMsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO1VBQy9EQSxJQUFJNkIseUJBQTBCLDBHQUF5RzdCLElBQUk2Qix5QkFBMEI7S0FEbkgsQ0E3RDdDOztBQWlFWCxLQUFDcEIsZUFBS3dCLGdDQUFOLEdBQXlDakMsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO21CQUM5Q0EsSUFBSWtDLE9BQVEsS0FBSSxvQkFBV2xDLElBQUltQyxNQUFmLENBQXVCO0tBRE4sRUFFN0MsRUFBRTdCLGlCQUFpQixJQUFuQixFQUY2QyxDQWpFckM7O0FBcUVYLEtBQUNHLGVBQUsyQix5QkFBTixHQUFrQ3BDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTs7O1VBR2hELG9CQUFXQSxJQUFJaUIsTUFBZixDQUF1QjtLQUhZLEVBSXRDLEVBQUVYLGlCQUFpQixJQUFuQixFQUpzQyxDQXJFOUI7O0FBMkVYLEtBQUNHLGVBQUs0QixpQkFBTixHQUEwQnJDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTs7O1VBR3hDLG9CQUFXQSxJQUFJaUIsTUFBZixDQUF1QjtLQUhJLEVBSTlCLEVBQUVYLGlCQUFpQixJQUFuQixFQUo4QixDQTNFdEI7O0FBaUZYLEtBQUNHLGVBQUs2QixzQkFBTixHQUErQnRDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTttRkFDNEJBLElBQUkyQixVQUFXO0tBRHhELENBakYzQjs7QUFxRlgsS0FBQ2xCLGVBQUs4Qix5QkFBTixHQUFrQ3ZDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtlQUMzQ0EsSUFBSXdDLFlBQWEsK0RBQThEeEMsSUFBSVksV0FBWTtLQURqRSxDQXJGOUI7O0FBeUZYLEtBQUNILGVBQUtnQywwQkFBTixHQUFtQ3pDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtlQUM1Q0EsSUFBSXdDLFlBQWEsNERBQTJEeEMsSUFBSVksV0FBWTtLQUQ3RCxDQXpGL0I7O0FBNkZYLEtBQUNILGVBQUtpQyxpQ0FBTixHQUEwQzFDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtlQUNuREEsSUFBSXdDLFlBQWEsK0RBQThEeEMsSUFBSVksV0FBWTtLQUR6RCxDQTdGdEM7O0FBaUdYLEtBQUNILGVBQUtrQyxzQ0FBTixHQUErQzNDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtlQUN4REEsSUFBSXdDLFlBQWEsaUZBQWdGeEMsSUFBSVksV0FBWTtLQUR0RSxDQWpHM0M7O0FBcUdYLEtBQUNILGVBQUttQyw2QkFBTixHQUFzQzVDLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTsyQkFDbkNBLElBQUl3QyxZQUFhLDZFQUE0RXhDLElBQUk2QyxZQUFhLFFBQU83QyxJQUFJWSxXQUFZO0tBRC9HLENBckdsQzs7QUF5R1gsS0FBQ0gsZUFBS3FDLDBCQUFOLEdBQW1DOUMsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQzVDQSxJQUFJd0MsWUFBYSx1REFBc0R4QyxJQUFJWSxXQUFZO0tBRHhELENBekcvQjs7QUE2R1gsS0FBQ0gsZUFBS3NDLHVCQUFOLEdBQWdDL0MsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQ3pDQSxJQUFJd0MsWUFBYSw0REFBMkR4QyxJQUFJWSxXQUFZO0tBRGhFLENBN0c1Qjs7QUFpSFgsS0FBQ0gsZUFBS3VDLGtDQUFOLEdBQTJDaEQsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQ3BEQSxJQUFJd0MsWUFBYSwrREFBOER4QyxJQUFJWSxXQUFZO0tBRHhELENBakh2Qzs7QUFxSFgsS0FBQ0gsZUFBS3dDLDBCQUFOLEdBQW1DLENBQUNqRCxHQUFELEVBQU1kLGFBQU4sS0FBd0JhLE9BQU9DLEdBQVAsRUFBYTs7O1VBR2pFakIsd0JBQXdCaUIsSUFBSWhCLFVBQTVCLEVBQXdDZ0IsSUFBSWYsVUFBNUMsRUFBd0RDLGFBQXhELENBQXdFO0tBSHBCLENBckhoRDs7QUEySFgsS0FBQ3VCLGVBQUt5Qyw2QkFBTixHQUFzQ2xELE9BQU9ELE9BQU9DLEdBQVAsRUFBYTs7S0FBYixDQTNIbEM7O0FBK0hYLEtBQUNTLGVBQUswQyx1Q0FBTixHQUFnRG5ELE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtzRkFDY0EsSUFBSW9ELGVBQWdCO0tBRC9DLENBL0g1Qzs7QUFtSVgsS0FBQzNDLGVBQUs0QyxvQ0FBTixHQUE2QyxDQUFDckQsR0FBRCxFQUFNZCxhQUFOLEtBQXdCYSxPQUFPQyxHQUFQLEVBQWE7eUJBQzdEQSxJQUFJd0MsWUFBYTs7VUFFL0J6RCx3QkFBd0JpQixJQUFJaEIsVUFBNUIsRUFBd0NnQixJQUFJZixVQUE1QyxFQUF3REMsYUFBeEQsQ0FBd0U7S0FIVixDQW5JMUQ7O0FBeUlYLEtBQUN1QixlQUFLNkMsdUNBQU4sR0FBZ0R0RCxPQUFPRCxPQUFPQyxHQUFQLEVBQWE7a0RBQ3RCQSxJQUFJd0MsWUFBYTtLQURSLENBekk1Qzs7QUE2SVgsS0FBQy9CLGVBQUs4QyxpREFBTixHQUEwRHZELE9BQU9ELE9BQU9DLEdBQVAsRUFBYTt5QkFDekRBLElBQUl3QyxZQUFhLDBEQUF5RHhDLElBQUlvRCxlQUFnQjtLQURsRCxDQTdJdEQ7O0FBaUpYLEtBQUMzQyxlQUFLK0MsNkJBQU4sR0FBc0N4RCxPQUFPRCxPQUFPQyxHQUFQLEVBQWE7O0tBQWIsQ0FqSmxDOztBQXFKWCxLQUFDUyxlQUFLZ0Qsb0NBQU4sR0FBNkN6RCxPQUFPRCxPQUFPQyxHQUFQLEVBQWE7a0RBQ25CQSxJQUFJd0MsWUFBYTtLQURYLENBckp6Qzs7QUF5SlgsS0FBQy9CLGVBQUtpRCxnQ0FBTixHQUF5QzFELE9BQU9ELE9BQU9DLEdBQVAsRUFBYTs7S0FBYixDQXpKckM7O0FBNkpYLEtBQUNTLGVBQUtrRCxnQ0FBTixHQUF5QzNELE9BQU9ELE9BQU9DLEdBQVAsRUFBYTs7S0FBYixDQTdKckM7O0FBaUtYLEtBQUNTLGVBQUttRCxpQ0FBTixHQUEwQzVELE9BQU9ELE9BQU9DLEdBQVAsRUFBYTs7VUFFeERBLElBQUk2RCxTQUFKLENBQWN2RSxHQUFkLENBQWtCd0UsUUFBUyxLQUFJLG9CQUFXQSxJQUFYLENBQWlCLEVBQWhELEVBQW1EaEUsSUFBbkQsQ0FBd0QsSUFBeEQsQ0FBOEQ7S0FGbkIsQ0FqS3RDOztBQXNLWCxLQUFDVyxlQUFLc0QsNkJBQU4sR0FBc0MvRCxPQUFPRCxPQUFPQyxHQUFQLEVBQWE7O0tBQWIsQ0F0S2xDOztBQTBLWCxLQUFDUyxlQUFLdUQsMkJBQU4sR0FBb0NoRSxPQUFPRCxPQUFPQyxHQUFQLEVBQWE7O0tBQWIsQ0ExS2hDOztBQThLWCxLQUFDUyxlQUFLd0Qsd0JBQU4sR0FBaUNqRSxPQUFPRCxPQUFPQyxHQUFQLEVBQWE7ZUFDMUNBLElBQUl3QyxZQUFhO0tBRFksQ0E5SzdCOztBQWtMWCxLQUFDL0IsZUFBS3lELGdDQUFOLEdBQXlDbEUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO2VBQ2xEQSxJQUFJd0MsWUFBYSx3Q0FBdUN4QyxJQUFJWSxXQUFZO0tBRG5DLENBbExyQzs7QUFzTFgsS0FBQ0gsZUFBSzBELDhCQUFOLEdBQXVDbkUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO3FGQUNzQkEsSUFBSW9FLFVBQVc7S0FEbEQsQ0F0TG5DOztBQTBMWCxLQUFDM0QsZUFBSzRELDRCQUFOLEdBQXFDckUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhOztLQUFiLENBMUxqQzs7QUE4TFgsS0FBQ1MsZUFBSzZELDZCQUFOLEdBQXNDdEUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhOztLQUFiLENBOUxsQzs7QUFrTVgsS0FBQ1MsZUFBSzhELDBCQUFOLEdBQW1DdkUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhOztLQUFiLENBbE0vQjs7QUFzTVgsS0FBQ1MsZUFBSytELDZCQUFOLEdBQXNDeEUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhOztLQUFiLENBdE1sQzs7QUEwTVgsS0FBQ1MsZUFBS2dFLGlCQUFOLEdBQTBCekUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhOztLQUFiLENBMU10Qjs7QUE4TVgsS0FBQ1MsZUFBS2lFLDZCQUFOLEdBQXNDMUUsT0FBT0QsT0FBT0MsR0FBUCxFQUFhO1VBQ3BELG9CQUFXQSxJQUFJaUIsTUFBZixDQUF1QjtLQURnQixDQTlNbEM7O0FBa05YLEtBQUNSLGVBQUtrRSxnQ0FBTixHQUF5QzNFLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtTQUN4REEsSUFBSTZCLHlCQUEwQjtLQURhLENBbE5yQzs7QUFzTlgsS0FBQ3BCLGVBQUttRSwwQkFBTixHQUFtQzVFLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTs7S0FBYixDQXROL0I7O0FBME5YLEtBQUNTLGVBQUtvRSxtQkFBTixHQUE0QjdFLE9BQU9ELE9BQU9DLEdBQVAsRUFBYTtrQkFDbENBLElBQUk4RSxZQUFhOztVQUV6QixvQkFBVzlFLElBQUlpQixNQUFmLENBQXVCO0tBSE0sQ0ExTnhCOztBQWdPWCxLQUFDUixlQUFLc0UsZ0RBQU4sR0FBeUQsQ0FBQy9FLEdBQUQsRUFBTWQsYUFBTixLQUF3QmEsT0FBT0MsR0FBUCxFQUFhOzs7VUFHdkZqQix3QkFBd0JpQixJQUFJaEIsVUFBNUIsRUFBd0NnQixJQUFJZixVQUE1QyxFQUF3REMsYUFBeEQsQ0FBd0U7S0FIRSxDQWhPdEU7O0FBc09YLEtBQUN1QixlQUFLdUUsNkJBQU4sR0FBc0NoRixPQUFPRCxPQUFPQyxHQUFQLEVBQWE7O0tBQWIsQ0F0T2xDOztBQTBPWCxLQUFDUyxlQUFLd0UsdUNBQU4sR0FBZ0RqRixPQUFPRCxPQUFPQyxHQUFQLEVBQWE7MEVBQ0VBLElBQUlrRixVQUFXLElBQUdsRixJQUFJbUYsSUFBSztLQUQxQyxDQTFPNUM7O0FBOE9YLEtBQUMxRSxlQUFLMkUsZ0NBQU4sR0FBeUNwRixPQUFPRCxPQUFPQyxHQUFQLEVBQWE7O0tBQWIsQ0E5T3JDOztBQWtQWCxLQUFDUyxlQUFLNEUsZ0NBQU4sR0FBeUNyRixPQUFPRCxPQUFPQyxHQUFQLEVBQWE7K0JBQ2xDQSxJQUFJWSxXQUFZLHdCQUF1QlosSUFBSXdDLFlBQWE7O1VBRTdFeEMsSUFBSWlCLE1BQU87S0FIK0IsQ0FsUHJDOztBQXdQWCxLQUFDUixlQUFLNkUsOEJBQU4sR0FBdUN0RixPQUFPRCxPQUFPQyxHQUFQLEVBQWE7O0tBQWI7QUF4UG5DLEMiLCJmaWxlIjoiZXJyb3JzL3Rlc3QtcnVuL3RlbXBsYXRlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWRlbnQgZnJvbSAnZGVkZW50JztcbmltcG9ydCB7IGVzY2FwZSBhcyBlc2NhcGVIdG1sIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBUWVBFIGZyb20gJy4vdHlwZSc7XG5pbXBvcnQgVEVTVF9SVU5fUEhBU0UgZnJvbSAnLi4vLi4vdGVzdC1ydW4vcGhhc2UnO1xuXG5jb25zdCBTVUJUSVRMRVMgPSB7XG4gICAgW1RFU1RfUlVOX1BIQVNFLmluaXRpYWxdOiAgICAgICAgICAgICAgICAgJycsXG4gICAgW1RFU1RfUlVOX1BIQVNFLmluRml4dHVyZUJlZm9yZUhvb2tdOiAgICAgJzxzcGFuIGNsYXNzPVwic3VidGl0bGVcIj5FcnJvciBpbiBmaXh0dXJlLmJlZm9yZSBob29rPC9zcGFuPlxcbicsXG4gICAgW1RFU1RfUlVOX1BIQVNFLmluRml4dHVyZUJlZm9yZUVhY2hIb29rXTogJzxzcGFuIGNsYXNzPVwic3VidGl0bGVcIj5FcnJvciBpbiBmaXh0dXJlLmJlZm9yZUVhY2ggaG9vazwvc3Bhbj5cXG4nLFxuICAgIFtURVNUX1JVTl9QSEFTRS5pblRlc3RCZWZvcmVIb29rXTogICAgICAgICc8c3BhbiBjbGFzcz1cInN1YnRpdGxlXCI+RXJyb3IgaW4gdGVzdC5iZWZvcmUgaG9vazwvc3Bhbj5cXG4nLFxuICAgIFtURVNUX1JVTl9QSEFTRS5pblRlc3RdOiAgICAgICAgICAgICAgICAgICcnLFxuICAgIFtURVNUX1JVTl9QSEFTRS5pblRlc3RBZnRlckhvb2tdOiAgICAgICAgICc8c3BhbiBjbGFzcz1cInN1YnRpdGxlXCI+RXJyb3IgaW4gdGVzdC5hZnRlciBob29rPC9zcGFuPlxcbicsXG4gICAgW1RFU1RfUlVOX1BIQVNFLmluRml4dHVyZUFmdGVyRWFjaEhvb2tdOiAgJzxzcGFuIGNsYXNzPVwic3VidGl0bGVcIj5FcnJvciBpbiBmaXh0dXJlLmFmdGVyRWFjaCBob29rPC9zcGFuPlxcbicsXG4gICAgW1RFU1RfUlVOX1BIQVNFLmluRml4dHVyZUFmdGVySG9va106ICAgICAgJzxzcGFuIGNsYXNzPVwic3VidGl0bGVcIj5FcnJvciBpbiBmaXh0dXJlLmFmdGVyIGhvb2s8L3NwYW4+XFxuJyxcbiAgICBbVEVTVF9SVU5fUEhBU0UuaW5Sb2xlSW5pdGlhbGl6ZXJdOiAgICAgICAnPHNwYW4gY2xhc3M9XCJzdWJ0aXRsZVwiPkVycm9yIGluIFJvbGUgaW5pdGlhbGl6ZXI8L3NwYW4+XFxuJyxcbiAgICBbVEVTVF9SVU5fUEhBU0UuaW5Cb29rbWFya1Jlc3RvcmVdOiAgICAgICAnPHNwYW4gY2xhc3M9XCJzdWJ0aXRsZVwiPkVycm9yIHdoaWxlIHJlc3RvcmluZyBjb25maWd1cmF0aW9uIGFmdGVyIFJvbGUgc3dpdGNoPC9zcGFuPlxcbidcbn07XG5cbmZ1bmN0aW9uIGZvcm1hdFNlbGVjdG9yQ2FsbHN0YWNrIChhcGlGbkNoYWluLCBhcGlGbkluZGV4LCB2aWV3cG9ydFdpZHRoKSB7XG4gICAgaWYgKHR5cGVvZiBhcGlGbkluZGV4ID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgcmV0dXJuICcnO1xuXG4gICAgY29uc3QgZW1wdHlTcGFjZXMgICAgPSAxMDtcbiAgICBjb25zdCBlbGxpcHNpcyAgICAgICA9ICcuLi4pJztcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHZpZXdwb3J0V2lkdGggLSBlbXB0eVNwYWNlcztcblxuICAgIHJldHVybiBhcGlGbkNoYWluLm1hcCgoYXBpRm4sIGluZGV4KSA9PiB7XG4gICAgICAgIGxldCBmb3JtYXR0ZWRBcGlGbiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKTtcblxuICAgICAgICBmb3JtYXR0ZWRBcGlGbiArPSBpbmRleCA9PT0gYXBpRm5JbmRleCA/ICc+JyA6ICcgJztcbiAgICAgICAgZm9ybWF0dGVkQXBpRm4gKz0gJyB8ICc7XG4gICAgICAgIGZvcm1hdHRlZEFwaUZuICs9IGluZGV4ICE9PSAwID8gJyAgJyA6ICcnO1xuICAgICAgICBmb3JtYXR0ZWRBcGlGbiArPSBhcGlGbjtcblxuICAgICAgICBpZiAoZm9ybWF0dGVkQXBpRm4ubGVuZ3RoID4gYXZhaWxhYmxlV2lkdGgpXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkQXBpRm4uc3Vic3RyKDAsIGF2YWlsYWJsZVdpZHRoIC0gZW1wdHlTcGFjZXMpICsgZWxsaXBzaXM7XG5cbiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZEFwaUZuO1xuICAgIH0pLmpvaW4oJ1xcbicpO1xufVxuXG5mdW5jdGlvbiBtYXJrdXAgKGVyciwgbXNnTWFya3VwLCBvcHRzID0ge30pIHtcbiAgICBtc2dNYXJrdXAgPSBkZWRlbnQoYFxuICAgICAgICAke1NVQlRJVExFU1tlcnIudGVzdFJ1blBoYXNlXX08ZGl2IGNsYXNzPVwibWVzc2FnZVwiPiR7ZGVkZW50KG1zZ01hcmt1cCl9PC9kaXY+XG5cbiAgICAgICAgPHN0cm9uZz5Ccm93c2VyOjwvc3Ryb25nPiA8c3BhbiBjbGFzcz1cInVzZXItYWdlbnRcIj4ke2Vyci51c2VyQWdlbnR9PC9zcGFuPlxuICAgIGApO1xuXG4gICAgaWYgKGVyci5zY3JlZW5zaG90UGF0aClcbiAgICAgICAgbXNnTWFya3VwICs9IGBcXG48ZGl2IGNsYXNzPVwic2NyZWVuc2hvdC1pbmZvXCI+PHN0cm9uZz5TY3JlZW5zaG90Ojwvc3Ryb25nPiA8YSBjbGFzcz1cInNjcmVlbnNob3QtcGF0aFwiPiR7ZXNjYXBlSHRtbChlcnIuc2NyZWVuc2hvdFBhdGgpfTwvYT48L2Rpdj5gO1xuXG4gICAgaWYgKCFvcHRzLndpdGhvdXRDYWxsc2l0ZSkge1xuICAgICAgICB2YXIgY2FsbHNpdGVNYXJrdXAgPSBlcnIuZ2V0Q2FsbHNpdGVNYXJrdXAoKTtcblxuICAgICAgICBpZiAoY2FsbHNpdGVNYXJrdXApXG4gICAgICAgICAgICBtc2dNYXJrdXAgKz0gYFxcblxcbiR7Y2FsbHNpdGVNYXJrdXB9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gbXNnTWFya3VwO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgW1RZUEUuYWN0aW9uSW50ZWdlck9wdGlvbkVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgVGhlIFwiJHtlcnIub3B0aW9uTmFtZX1cIiBvcHRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgYW4gaW50ZWdlciwgYnV0IGl0IHdhcyAke2Vyci5hY3R1YWxWYWx1ZX0uXG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25Qb3NpdGl2ZUludGVnZXJPcHRpb25FcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBcIiR7ZXJyLm9wdGlvbk5hbWV9XCIgb3B0aW9uIGlzIGV4cGVjdGVkIHRvIGJlIGEgcG9zaXRpdmUgaW50ZWdlciwgYnV0IGl0IHdhcyAke2Vyci5hY3R1YWxWYWx1ZX0uXG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25Cb29sZWFuT3B0aW9uRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgXCIke2Vyci5vcHRpb25OYW1lfVwiIG9wdGlvbiBpcyBleHBlY3RlZCB0byBiZSBhIGJvb2xlYW4gdmFsdWUsIGJ1dCBpdCB3YXMgJHtlcnIuYWN0dWFsVmFsdWV9LlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uU3BlZWRPcHRpb25FcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBcIiR7ZXJyLm9wdGlvbk5hbWV9XCIgb3B0aW9uIGlzIGV4cGVjdGVkIHRvIGJlIGEgbnVtYmVyIGJldHdlZW4gMC4wMSBhbmQgMSwgYnV0IGl0IHdhcyAke2Vyci5hY3R1YWxWYWx1ZX0uXG4gICAgYCksXG5cbiAgICBbVFlQRS5wYWdlTG9hZEVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgJHtlcnIuZXJyTXNnfVxuICAgIGApLFxuXG4gICAgW1RZUEUudW5jYXVnaHRFcnJvck9uUGFnZV06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIEVycm9yIG9uIHBhZ2UgPGEgaHJlZj1cIiR7ZXJyLnBhZ2VEZXN0VXJsfVwiPiR7ZXJyLnBhZ2VEZXN0VXJsfTwvYT46XG5cbiAgICAgICAgJHtlc2NhcGVIdG1sKGVyci5lcnJNc2cpfVxuICAgIGApLFxuXG4gICAgW1RZUEUudW5jYXVnaHRFcnJvckluVGVzdENvZGVdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICAke2VzY2FwZUh0bWwoZXJyLmVyck1zZyl9XG4gICAgYCksXG5cbiAgICBbVFlQRS5uYXRpdmVEaWFsb2dOb3RIYW5kbGVkRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBBIG5hdGl2ZSAke2Vyci5kaWFsb2dUeXBlfSBkaWFsb2cgd2FzIGludm9rZWQgb24gcGFnZSA8YSBocmVmPVwiJHtlcnIucGFnZVVybH1cIj4ke2Vyci5wYWdlVXJsfTwvYT4sIGJ1dCBubyBoYW5kbGVyIHdhcyBzZXQgZm9yIGl0LiBVc2UgdGhlIFwic2V0TmF0aXZlRGlhbG9nSGFuZGxlclwiIGZ1bmN0aW9uIHRvIGludHJvZHVjZSBhIGhhbmRsZXIgZnVuY3Rpb24gZm9yIG5hdGl2ZSBkaWFsb2dzLlxuICAgIGApLFxuXG4gICAgW1RZUEUudW5jYXVnaHRFcnJvckluTmF0aXZlRGlhbG9nSGFuZGxlcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIEFuIGVycm9yIG9jY3VycmVkIGluIHRoZSBuYXRpdmUgZGlhbG9nIGhhbmRsZXIgY2FsbGVkIGZvciBhIG5hdGl2ZSAke2Vyci5kaWFsb2dUeXBlfSBkaWFsb2cgb24gcGFnZSA8YSBocmVmPVwiJHtlcnIucGFnZVVybH1cIj4ke2Vyci5wYWdlVXJsfTwvYT46XG5cbiAgICAgICAgJHtlc2NhcGVIdG1sKGVyci5lcnJNc2cpfVxuICAgIGApLFxuXG4gICAgW1RZUEUuc2V0VGVzdFNwZWVkQXJndW1lbnRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFNwZWVkIGlzIGV4cGVjdGVkIHRvIGJlIGEgbnVtYmVyIGJldHdlZW4gMC4wMSBhbmQgMSwgYnV0ICR7ZXJyLmFjdHVhbFZhbHVlfSB3YXMgcGFzc2VkLlxuICAgIGApLFxuXG4gICAgW1RZUEUuc2V0TmF0aXZlRGlhbG9nSGFuZGxlckNvZGVXcm9uZ1R5cGVFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBuYXRpdmUgZGlhbG9nIGhhbmRsZXIgaXMgZXhwZWN0ZWQgdG8gYmUgYSBmdW5jdGlvbiwgQ2xpZW50RnVuY3Rpb24gb3IgbnVsbCwgYnV0IGl0IHdhcyAke2Vyci5hY3R1YWxUeXBlfS5cbiAgICBgKSxcblxuICAgIFtUWVBFLnVuY2F1Z2h0RXJyb3JJbkNsaWVudEZ1bmN0aW9uQ29kZV06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIEFuIGVycm9yIG9jY3VycmVkIGluICR7ZXJyLmluc3RhbnRpYXRpb25DYWxsc2l0ZU5hbWV9IGNvZGU6XG5cbiAgICAgICAgJHtlc2NhcGVIdG1sKGVyci5lcnJNc2cpfVxuICAgIGApLFxuXG4gICAgW1RZUEUudW5jYXVnaHRFcnJvckluQ3VzdG9tRE9NUHJvcGVydHlDb2RlXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiB0cnlpbmcgdG8gY2FsY3VsYXRlIGEgY3VzdG9tIFNlbGVjdG9yIHByb3BlcnR5IFwiJHtlcnIucHJvcGVydHl9XCI6XG5cbiAgICAgICAgJHtlc2NhcGVIdG1sKGVyci5lcnJNc2cpfVxuICAgIGApLFxuXG4gICAgW1RZUEUuY2xpZW50RnVuY3Rpb25FeGVjdXRpb25JbnRlcnJ1cHRpb25FcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgICR7ZXJyLmluc3RhbnRpYXRpb25DYWxsc2l0ZU5hbWV9IGV4ZWN1dGlvbiB3YXMgaW50ZXJydXB0ZWQgYnkgcGFnZSB1bmxvYWQuIFRoaXMgcHJvYmxlbSBtYXkgYXBwZWFyIGlmIHlvdSB0cmlnZ2VyIHBhZ2UgbmF2aWdhdGlvbiBmcm9tICR7ZXJyLmluc3RhbnRpYXRpb25DYWxsc2l0ZU5hbWV9IGNvZGUuXG4gICAgYCksXG5cbiAgICBbVFlQRS51bmNhdWdodE5vbkVycm9yT2JqZWN0SW5UZXN0Q29kZV06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFVuY2F1Z2h0ICR7ZXJyLm9ialR5cGV9IFwiJHtlc2NhcGVIdG1sKGVyci5vYmpTdHIpfVwiIHdhcyB0aHJvd24uIFRocm93IEVycm9yIGluc3RlYWQuXG4gICAgYCwgeyB3aXRob3V0Q2FsbHNpdGU6IHRydWUgfSksXG5cbiAgICBbVFlQRS51bmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uOlxuICAgICAgICBcbiAgICAgICAgJHtlc2NhcGVIdG1sKGVyci5lcnJNc2cpfVxuICAgIGAsIHsgd2l0aG91dENhbGxzaXRlOiB0cnVlIH0pLFxuXG4gICAgW1RZUEUudW5jYXVnaHRFeGNlcHRpb25dOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBVbmNhdWdodCBleGNlcHRpb246XG4gICAgICAgIFxuICAgICAgICAke2VzY2FwZUh0bWwoZXJyLmVyck1zZyl9XG4gICAgYCwgeyB3aXRob3V0Q2FsbHNpdGU6IHRydWUgfSksXG5cbiAgICBbVFlQRS5hY3Rpb25PcHRpb25zVHlwZUVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgQWN0aW9uIG9wdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0LCBudWxsIG9yIHVuZGVmaW5lZCBidXQgaXQgd2FzICR7ZXJyLmFjdHVhbFR5cGV9LlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uU3RyaW5nQXJndW1lbnRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBcIiR7ZXJyLmFyZ3VtZW50TmFtZX1cIiBhcmd1bWVudCBpcyBleHBlY3RlZCB0byBiZSBhIG5vbi1lbXB0eSBzdHJpbmcsIGJ1dCBpdCB3YXMgJHtlcnIuYWN0dWFsVmFsdWV9LlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uQm9vbGVhbkFyZ3VtZW50RXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgXCIke2Vyci5hcmd1bWVudE5hbWV9XCIgYXJndW1lbnQgaXMgZXhwZWN0ZWQgdG8gYmUgYSBib29sZWFuIHZhbHVlLCBidXQgaXQgd2FzICR7ZXJyLmFjdHVhbFZhbHVlfS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmFjdGlvbk51bGxhYmxlU3RyaW5nQXJndW1lbnRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBcIiR7ZXJyLmFyZ3VtZW50TmFtZX1cIiBhcmd1bWVudCBpcyBleHBlY3RlZCB0byBiZSBhIG51bGwgb3IgYSBzdHJpbmcsIGJ1dCBpdCB3YXMgJHtlcnIuYWN0dWFsVmFsdWV9LlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uU3RyaW5nT3JTdHJpbmdBcnJheUFyZ3VtZW50RXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgXCIke2Vyci5hcmd1bWVudE5hbWV9XCIgYXJndW1lbnQgaXMgZXhwZWN0ZWQgdG8gYmUgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgc3RyaW5nIGFycmF5LCBidXQgaXQgd2FzICR7ZXJyLmFjdHVhbFZhbHVlfS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmFjdGlvblN0cmluZ0FycmF5RWxlbWVudEVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgRWxlbWVudHMgb2YgdGhlIFwiJHtlcnIuYXJndW1lbnROYW1lfVwiIGFyZ3VtZW50IGFyZSBleHBlY3RlZCB0byBiZSBub24tZW1wdHkgc3RyaW5ncywgYnV0IHRoZSBlbGVtZW50IGF0IGluZGV4ICR7ZXJyLmVsZW1lbnRJbmRleH0gd2FzICR7ZXJyLmFjdHVhbFZhbHVlfS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmFjdGlvbkludGVnZXJBcmd1bWVudEVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgVGhlIFwiJHtlcnIuYXJndW1lbnROYW1lfVwiIGFyZ3VtZW50IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGludGVnZXIsIGJ1dCBpdCB3YXMgJHtlcnIuYWN0dWFsVmFsdWV9LlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uUm9sZUFyZ3VtZW50RXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgXCIke2Vyci5hcmd1bWVudE5hbWV9XCIgYXJndW1lbnQgaXMgZXhwZWN0ZWQgdG8gYmUgYSBSb2xlIGluc3RhbmNlLCBidXQgaXQgd2FzICR7ZXJyLmFjdHVhbFZhbHVlfS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmFjdGlvblBvc2l0aXZlSW50ZWdlckFyZ3VtZW50RXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgXCIke2Vyci5hcmd1bWVudE5hbWV9XCIgYXJndW1lbnQgaXMgZXhwZWN0ZWQgdG8gYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLCBidXQgaXQgd2FzICR7ZXJyLmFjdHVhbFZhbHVlfS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmFjdGlvbkVsZW1lbnROb3RGb3VuZEVycm9yXTogKGVyciwgdmlld3BvcnRXaWR0aCkgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgc3BlY2lmaWVkIHNlbGVjdG9yIGRvZXMgbm90IG1hdGNoIGFueSBlbGVtZW50IGluIHRoZSBET00gdHJlZS5cbiAgICAgICAgXG4gICAgICAgICR7IGZvcm1hdFNlbGVjdG9yQ2FsbHN0YWNrKGVyci5hcGlGbkNoYWluLCBlcnIuYXBpRm5JbmRleCwgdmlld3BvcnRXaWR0aCkgfVxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uRWxlbWVudElzSW52aXNpYmxlRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBzZWxlY3RvciBpcyBub3QgdmlzaWJsZS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmFjdGlvblNlbGVjdG9yTWF0Y2hlc1dyb25nTm9kZVR5cGVFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBzcGVjaWZpZWQgc2VsZWN0b3IgaXMgZXhwZWN0ZWQgdG8gbWF0Y2ggYSBET00gZWxlbWVudCwgYnV0IGl0IG1hdGNoZXMgYSAke2Vyci5ub2RlRGVzY3JpcHRpb259IG5vZGUuXG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25BZGRpdGlvbmFsRWxlbWVudE5vdEZvdW5kRXJyb3JdOiAoZXJyLCB2aWV3cG9ydFdpZHRoKSA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBzcGVjaWZpZWQgXCIke2Vyci5hcmd1bWVudE5hbWV9XCIgZG9lcyBub3QgbWF0Y2ggYW55IGVsZW1lbnQgaW4gdGhlIERPTSB0cmVlLlxuICAgICAgICBcbiAgICAgICAgJHsgZm9ybWF0U2VsZWN0b3JDYWxsc3RhY2soZXJyLmFwaUZuQ2hhaW4sIGVyci5hcGlGbkluZGV4LCB2aWV3cG9ydFdpZHRoKSB9XG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25BZGRpdGlvbmFsRWxlbWVudElzSW52aXNpYmxlRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBcIiR7ZXJyLmFyZ3VtZW50TmFtZX1cIiBpcyBub3QgdmlzaWJsZS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmFjdGlvbkFkZGl0aW9uYWxTZWxlY3Rvck1hdGNoZXNXcm9uZ05vZGVUeXBlRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgc3BlY2lmaWVkIFwiJHtlcnIuYXJndW1lbnROYW1lfVwiIGlzIGV4cGVjdGVkIHRvIG1hdGNoIGEgRE9NIGVsZW1lbnQsIGJ1dCBpdCBtYXRjaGVzIGEgJHtlcnIubm9kZURlc2NyaXB0aW9ufSBub2RlLlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uRWxlbWVudE5vbkVkaXRhYmxlRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgYWN0aW9uIGVsZW1lbnQgaXMgZXhwZWN0ZWQgdG8gYmUgZWRpdGFibGUgKGFuIGlucHV0LCB0ZXh0YXJlYSBvciBlbGVtZW50IHdpdGggdGhlIGNvbnRlbnRFZGl0YWJsZSBhdHRyaWJ1dGUpLlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uRWxlbWVudE5vbkNvbnRlbnRFZGl0YWJsZUVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgXCIke2Vyci5hcmd1bWVudE5hbWV9XCIgaXMgZXhwZWN0ZWQgdG8gaGF2ZSB0aGUgY29udGVudEVkaXRhYmxlIGF0dHJpYnV0ZSBlbmFibGVkIG9yIHRoZSBlbnRpcmUgZG9jdW1lbnQgc2hvdWxkIGJlIGluIGRlc2lnbiBtb2RlLlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uUm9vdENvbnRhaW5lck5vdEZvdW5kRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBDb250ZW50IGJldHdlZW4gdGhlIGFjdGlvbiBlbGVtZW50cyBjYW5ub3QgYmUgc2VsZWN0ZWQgYmVjYXVzZSB0aGUgcm9vdCBjb250YWluZXIgZm9yIHRoZSBzZWxlY3Rpb24gcmFuZ2UgY2Fubm90IGJlIGZvdW5kLCBpLmUuIHRoZXNlIGVsZW1lbnRzIGRvIG5vdCBoYXZlIGEgY29tbW9uIGFuY2VzdG9yIHdpdGggdGhlIGNvbnRlbnRFZGl0YWJsZSBhdHRyaWJ1dGUuXG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25FbGVtZW50SXNOb3RGaWxlSW5wdXRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBzcGVjaWZpZWQgc2VsZWN0b3IgZG9lcyBub3QgbWF0Y2ggYSBmaWxlIGlucHV0IGVsZW1lbnQuXG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25DYW5Ob3RGaW5kRmlsZVRvVXBsb2FkRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBDYW5ub3QgZmluZCB0aGUgZm9sbG93aW5nIGZpbGUocykgdG8gdXBsb2FkOlxuICAgICAgICAke2Vyci5maWxlUGF0aHMubWFwKHBhdGggPT4gYCAgJHtlc2NhcGVIdG1sKHBhdGgpfWApLmpvaW4oJ1xcbicpfVxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uRWxlbWVudE5vdFRleHRBcmVhRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgYWN0aW9uIGVsZW1lbnQgaXMgZXhwZWN0ZWQgdG8gYmUgYSAmbHQ7dGV4dGFyZWEmZ3Q7LlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uRWxlbWVudE5vdElmcmFtZUVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgVGhlIGFjdGlvbiBlbGVtZW50IGlzIGV4cGVjdGVkIHRvIGJlIGFuICZsdDtpZnJhbWUmZ3QuXG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25JbmNvcnJlY3RLZXlzRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBUaGUgXCIke2Vyci5hcmd1bWVudE5hbWV9XCIgYXJndW1lbnQgY29udGFpbnMgYW4gaW5jb3JyZWN0IGtleSBvciBrZXkgY29tYmluYXRpb24uXG4gICAgYCksXG5cbiAgICBbVFlQRS5hY3Rpb25VbnN1cHBvcnRlZERldmljZVR5cGVFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBcIiR7ZXJyLmFyZ3VtZW50TmFtZX1cIiBhcmd1bWVudCBzcGVjaWZpZXMgYW4gdW5zdXBwb3J0ZWQgXCIke2Vyci5hY3R1YWxWYWx1ZX1cIiBkZXZpY2UuIEZvciBhIGxpc3Qgb2Ygc3VwcG9ydGVkIGRldmljZXMsIHJlZmVyIHRvIDxhIGhyZWY9XCJodHRwOi8vdmlld3BvcnRzaXplcy5jb21cIj5odHRwOi8vdmlld3BvcnRzaXplcy5jb208L2E+LlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uSW52YWxpZFNjcm9sbFRhcmdldEVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgVW5hYmxlIHRvIHNjcm9sbCB0byB0aGUgc3BlY2lmaWVkIHBvaW50IGJlY2F1c2UgYSBwb2ludCB3aXRoIHRoZSBzcGVjaWZpZWQgJHtlcnIucHJvcGVydGllc30gaXMgbm90IGxvY2F0ZWQgaW5zaWRlIHRoZSBlbGVtZW50J3MgY3JvcHBpbmcgcmVnaW9uLlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uSWZyYW1lSXNOb3RMb2FkZWRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIENvbnRlbnQgb2YgdGhlIGlmcmFtZSB0byB3aGljaCB5b3UgYXJlIHN3aXRjaGluZyBkaWQgbm90IGxvYWQuXG4gICAgYCksXG5cbiAgICBbVFlQRS5jdXJyZW50SWZyYW1lSXNOb3RMb2FkZWRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIENvbnRlbnQgb2YgdGhlIGlmcmFtZSBpbiB3aGljaCB0aGUgdGVzdCBpcyBjdXJyZW50bHkgb3BlcmF0aW5nIGRpZCBub3QgbG9hZC5cbiAgICBgKSxcblxuICAgIFtUWVBFLmN1cnJlbnRJZnJhbWVOb3RGb3VuZEVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgVGhlIGlmcmFtZSBpbiB3aGljaCB0aGUgdGVzdCBpcyBjdXJyZW50bHkgb3BlcmF0aW5nIGRvZXMgbm90IGV4aXN0IGFueW1vcmUuXG4gICAgYCksXG5cbiAgICBbVFlQRS5jdXJyZW50SWZyYW1lSXNJbnZpc2libGVFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIFRoZSBpZnJhbWUgaW4gd2hpY2ggdGhlIHRlc3QgaXMgY3VycmVudGx5IG9wZXJhdGluZyBpcyBub3QgdmlzaWJsZSBhbnltb3JlLlxuICAgIGApLFxuXG4gICAgW1RZUEUubWlzc2luZ0F3YWl0RXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBBIGNhbGwgdG8gYW4gYXN5bmMgZnVuY3Rpb24gaXMgbm90IGF3YWl0ZWQuIFVzZSB0aGUgXCJhd2FpdFwiIGtleXdvcmQgYmVmb3JlIGFjdGlvbnMsIGFzc2VydGlvbnMgb3IgY2hhaW5zIG9mIHRoZW0gdG8gZW5zdXJlIHRoYXQgdGhleSBydW4gaW4gdGhlIHJpZ2h0IHNlcXVlbmNlLlxuICAgIGApLFxuXG4gICAgW1RZUEUuZXh0ZXJuYWxBc3NlcnRpb25MaWJyYXJ5RXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICAke2VzY2FwZUh0bWwoZXJyLmVyck1zZyl9XG4gICAgYCksXG5cbiAgICBbVFlQRS5kb21Ob2RlQ2xpZW50RnVuY3Rpb25SZXN1bHRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgJHtlcnIuaW5zdGFudGlhdGlvbkNhbGxzaXRlTmFtZX0gY2Fubm90IHJldHVybiBET00gZWxlbWVudHMuIFVzZSBTZWxlY3RvciBmdW5jdGlvbnMgZm9yIHRoaXMgcHVycG9zZS5cbiAgICBgKSxcblxuICAgIFtUWVBFLmludmFsaWRTZWxlY3RvclJlc3VsdEVycm9yXTogZXJyID0+IG1hcmt1cChlcnIsIGBcbiAgICAgICAgRnVuY3Rpb24gdGhhdCBzcGVjaWZpZXMgYSBzZWxlY3RvciBjYW4gb25seSByZXR1cm4gYSBET00gbm9kZSwgYW4gYXJyYXkgb2Ygbm9kZXMsIE5vZGVMaXN0LCBIVE1MQ29sbGVjdGlvbiwgbnVsbCBvciB1bmRlZmluZWQuIFVzZSBDbGllbnRGdW5jdGlvbiB0byByZXR1cm4gb3RoZXIgdmFsdWVzLlxuICAgIGApLFxuXG4gICAgW1RZUEUuYWN0aW9uU2VsZWN0b3JFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIEFjdGlvbiBcIiR7ZXJyLnNlbGVjdG9yTmFtZX1cIiBhcmd1bWVudCBlcnJvcjpcblxuICAgICAgICAke2VzY2FwZUh0bWwoZXJyLmVyck1zZyl9XG4gICAgYCksXG5cbiAgICBbVFlQRS5jYW50T2J0YWluSW5mb0ZvckVsZW1lbnRTcGVjaWZpZWRCeVNlbGVjdG9yRXJyb3JdOiAoZXJyLCB2aWV3cG9ydFdpZHRoKSA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIENhbm5vdCBvYnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIG5vZGUgYmVjYXVzZSB0aGUgc3BlY2lmaWVkIHNlbGVjdG9yIGRvZXMgbm90IG1hdGNoIGFueSBub2RlIGluIHRoZSBET00gdHJlZS5cbiAgICAgICAgXG4gICAgICAgICR7IGZvcm1hdFNlbGVjdG9yQ2FsbHN0YWNrKGVyci5hcGlGbkNoYWluLCBlcnIuYXBpRm5JbmRleCwgdmlld3BvcnRXaWR0aCkgfVxuICAgIGApLFxuXG4gICAgW1RZUEUud2luZG93RGltZW5zaW9uc092ZXJmbG93RXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBVbmFibGUgdG8gcmVzaXplIHRoZSB3aW5kb3cgYmVjYXVzZSB0aGUgc3BlY2lmaWVkIHNpemUgZXhjZWVkcyB0aGUgc2NyZWVuIHNpemUuIE9uIG1hY09TLCBhIHdpbmRvdyBjYW5ub3QgYmUgbGFyZ2VyIHRoYW4gdGhlIHNjcmVlbi5cbiAgICBgKSxcblxuICAgIFtUWVBFLmludmFsaWRFbGVtZW50U2NyZWVuc2hvdERpbWVuc2lvbnNFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgICBVbmFibGUgdG8gY2FwdHVyZSBhbiBlbGVtZW50IGltYWdlIGJlY2F1c2UgdGhlIHJlc3VsdGluZyBpbWFnZSAke2Vyci5kaW1lbnNpb25zfSAke2Vyci52ZXJifSB6ZXJvIG9yIG5lZ2F0aXZlLlxuICAgIGApLFxuXG4gICAgW1RZUEUucm9sZVN3aXRjaEluUm9sZUluaXRpYWxpemVyRXJyb3JdOiBlcnIgPT4gbWFya3VwKGVyciwgYFxuICAgICAgICBSb2xlIGNhbm5vdCBiZSBzd2l0Y2hlZCB3aGlsZSBhbm90aGVyIHJvbGUgaXMgYmVpbmcgaW5pdGlhbGl6ZWQuXG4gICAgYCksXG5cbiAgICBbVFlQRS5hc3NlcnRpb25FeGVjdXRhYmxlQXJndW1lbnRFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIENhbm5vdCBldmFsdWF0ZSB0aGUgXCIke2Vyci5hY3R1YWxWYWx1ZX1cIiBleHByZXNzaW9uIGluIHRoZSBcIiR7ZXJyLmFyZ3VtZW50TmFtZX1cIiBwYXJhbWV0ZXIgYmVjYXVzZSBvZiB0aGUgZm9sbG93aW5nIGVycm9yOlxuXG4gICAgICAgICR7ZXJyLmVyck1zZ31cbiAgICBgKSxcblxuICAgIFtUWVBFLmFzc2VydGlvblVuYXdhaXRlZFByb21pc2VFcnJvcl06IGVyciA9PiBtYXJrdXAoZXJyLCBgXG4gICAgICAgIEF0dGVtcHRlZCB0byBydW4gYXNzZXJ0aW9ucyBvbiBhIFByb21pc2Ugb2JqZWN0LiBEaWQgeW91IGZvcmdldCB0byBhd2FpdCBpdD8gSWYgbm90LCBwYXNzIFwieyBhbGxvd1VuYXdhaXRlZFByb21pc2U6IHRydWUgfVwiIHRvIHRoZSBhc3NlcnRpb24gb3B0aW9ucy5cbiAgICBgKVxufTtcbiJdfQ==
