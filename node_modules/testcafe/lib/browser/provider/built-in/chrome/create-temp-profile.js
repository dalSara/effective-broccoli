'use strict';

exports.__esModule = true;

var _stringify = require('babel-runtime/core-js/json/stringify');

var _stringify2 = _interopRequireDefault(_stringify);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _tempDirectory = require('../../../../utils/temp-directory');

var _tempDirectory2 = _interopRequireDefault(_tempDirectory);

var _promisifiedFunctions = require('../../../../utils/promisified-functions');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (() => {
    var _ref = (0, _asyncToGenerator3.default)(function* (proxyHostName) {
        const tempDir = yield _tempDirectory2.default.createDirectory('chrome-profile');
        const profileDirName = _path2.default.join(tempDir.path, 'Default');

        yield (0, _promisifiedFunctions.ensureDir)(profileDirName);

        const preferences = {
            'credentials_enable_service': false,

            'devtools': {
                'preferences': {
                    'currentDockState': '"undocked"',
                    'lastDockState': '"bottom"'
                }
            },

            'profile': {
                'content_settings': {
                    'exceptions': {
                        'automatic_downloads': {
                            [proxyHostName]: { setting: 1 }
                        }
                    }
                },

                'password_manager_enabled': false
            },

            'translate': {
                'enabled': false
            }
        };

        yield (0, _promisifiedFunctions.writeFile)(_path2.default.join(profileDirName, 'Preferences'), (0, _stringify2.default)(preferences));
        yield (0, _promisifiedFunctions.writeFile)(_path2.default.join(tempDir.path, 'First Run'), '');

        return tempDir;
    });

    return function (_x) {
        return _ref.apply(this, arguments);
    };
})();

module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9icm93c2VyL3Byb3ZpZGVyL2J1aWx0LWluL2Nocm9tZS9jcmVhdGUtdGVtcC1wcm9maWxlLmpzIl0sIm5hbWVzIjpbInByb3h5SG9zdE5hbWUiLCJ0ZW1wRGlyIiwiVGVtcERpcmVjdG9yeSIsImNyZWF0ZURpcmVjdG9yeSIsInByb2ZpbGVEaXJOYW1lIiwicGF0aCIsImpvaW4iLCJwcmVmZXJlbmNlcyIsInNldHRpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7K0NBR2UsV0FBZ0JBLGFBQWhCLEVBQStCO0FBQzFDLGNBQU1DLFVBQWlCLE1BQU1DLHdCQUFjQyxlQUFkLENBQThCLGdCQUE5QixDQUE3QjtBQUNBLGNBQU1DLGlCQUFpQkMsZUFBS0MsSUFBTCxDQUFVTCxRQUFRSSxJQUFsQixFQUF3QixTQUF4QixDQUF2Qjs7QUFFQSxjQUFNLHFDQUFVRCxjQUFWLENBQU47O0FBRUEsY0FBTUcsY0FBYztBQUNoQiwwQ0FBOEIsS0FEZDs7QUFHaEIsd0JBQVk7QUFDUiwrQkFBZTtBQUNYLHdDQUFvQixZQURUO0FBRVgscUNBQW9CO0FBRlQ7QUFEUCxhQUhJOztBQVVoQix1QkFBVztBQUNQLG9DQUFvQjtBQUNoQixrQ0FBYztBQUNWLCtDQUF1QjtBQUNuQiw2QkFBQ1AsYUFBRCxHQUFpQixFQUFFUSxTQUFTLENBQVg7QUFERTtBQURiO0FBREUsaUJBRGI7O0FBU1AsNENBQTRCO0FBVHJCLGFBVks7O0FBc0JoQix5QkFBYTtBQUNULDJCQUFXO0FBREY7QUF0QkcsU0FBcEI7O0FBMkJBLGNBQU0scUNBQVVILGVBQUtDLElBQUwsQ0FBVUYsY0FBVixFQUEwQixhQUExQixDQUFWLEVBQW9ELHlCQUFlRyxXQUFmLENBQXBELENBQU47QUFDQSxjQUFNLHFDQUFVRixlQUFLQyxJQUFMLENBQVVMLFFBQVFJLElBQWxCLEVBQXdCLFdBQXhCLENBQVYsRUFBZ0QsRUFBaEQsQ0FBTjs7QUFFQSxlQUFPSixPQUFQO0FBQ0gsSyIsImZpbGUiOiJicm93c2VyL3Byb3ZpZGVyL2J1aWx0LWluL2Nocm9tZS9jcmVhdGUtdGVtcC1wcm9maWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgVGVtcERpcmVjdG9yeSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy90ZW1wLWRpcmVjdG9yeSc7XG5pbXBvcnQgeyB3cml0ZUZpbGUsIGVuc3VyZURpciB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3Byb21pc2lmaWVkLWZ1bmN0aW9ucyc7XG5cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gKHByb3h5SG9zdE5hbWUpIHtcbiAgICBjb25zdCB0ZW1wRGlyICAgICAgICA9IGF3YWl0IFRlbXBEaXJlY3RvcnkuY3JlYXRlRGlyZWN0b3J5KCdjaHJvbWUtcHJvZmlsZScpO1xuICAgIGNvbnN0IHByb2ZpbGVEaXJOYW1lID0gcGF0aC5qb2luKHRlbXBEaXIucGF0aCwgJ0RlZmF1bHQnKTtcblxuICAgIGF3YWl0IGVuc3VyZURpcihwcm9maWxlRGlyTmFtZSk7XG5cbiAgICBjb25zdCBwcmVmZXJlbmNlcyA9IHtcbiAgICAgICAgJ2NyZWRlbnRpYWxzX2VuYWJsZV9zZXJ2aWNlJzogZmFsc2UsXG5cbiAgICAgICAgJ2RldnRvb2xzJzoge1xuICAgICAgICAgICAgJ3ByZWZlcmVuY2VzJzoge1xuICAgICAgICAgICAgICAgICdjdXJyZW50RG9ja1N0YXRlJzogJ1widW5kb2NrZWRcIicsXG4gICAgICAgICAgICAgICAgJ2xhc3REb2NrU3RhdGUnOiAgICAnXCJib3R0b21cIidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAncHJvZmlsZSc6IHtcbiAgICAgICAgICAgICdjb250ZW50X3NldHRpbmdzJzoge1xuICAgICAgICAgICAgICAgICdleGNlcHRpb25zJzoge1xuICAgICAgICAgICAgICAgICAgICAnYXV0b21hdGljX2Rvd25sb2Fkcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwcm94eUhvc3ROYW1lXTogeyBzZXR0aW5nOiAxIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICdwYXNzd29yZF9tYW5hZ2VyX2VuYWJsZWQnOiBmYWxzZVxuICAgICAgICB9LFxuXG4gICAgICAgICd0cmFuc2xhdGUnOiB7XG4gICAgICAgICAgICAnZW5hYmxlZCc6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYXdhaXQgd3JpdGVGaWxlKHBhdGguam9pbihwcm9maWxlRGlyTmFtZSwgJ1ByZWZlcmVuY2VzJyksIEpTT04uc3RyaW5naWZ5KHByZWZlcmVuY2VzKSk7XG4gICAgYXdhaXQgd3JpdGVGaWxlKHBhdGguam9pbih0ZW1wRGlyLnBhdGgsICdGaXJzdCBSdW4nKSwgJycpO1xuXG4gICAgcmV0dXJuIHRlbXBEaXI7XG59XG4iXX0=
